<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Zextras Auth &mdash; Zextras Suite 0.1-alpha documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/design-style.d53ab927f7bad3eaa42da95908504b10.min.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/suite.css" type="text/css" />
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/design-tabs.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Zextras Team" href="team.html" />
    <link rel="prev" title="Zextras Docs" href="docs.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
   <a href="index.html" class="icon icon-home"> Zextras Suite
</a>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="general.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Zextras Suite Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="backup.html">Zextras Backup</a></li>
<li class="toctree-l1"><a class="reference internal" href="restorestrategies.html">Zextras Backup Restore Strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="advancedbackup.html">Zextras Backup Advanced techniques</a></li>
<li class="toctree-l1"><a class="reference internal" href="mobile.html">Zextras Mobile</a></li>
<li class="toctree-l1"><a class="reference internal" href="powerstore.html">Zextras Powerstore</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin.html">Zextras Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="drive.html">Zextras Drive</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs.html">Zextras Docs</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Zextras Auth</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-zextras-auth">What is Zextras Auth</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supported-authentication-methods">Supported Authentication Methods</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#self-service-credentials-management">Self Service Credentials Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="#custom-login-page">Custom Login Page</a></li>
<li class="toctree-l4"><a class="reference internal" href="#saml">SAML</a></li>
<li class="toctree-l4"><a class="reference internal" href="#two-factor-authentication">Two Factor Authentication</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#zxauth-for-admins">ZxAuth for Admins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#requirements">Requirements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#auth-qr-code-req">QR Code Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fa-requirements">2FA Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#saml-requirements">SAML Requirements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#installing-the-zextras-auth-zimlet">Installing the Zextras Auth Zimlet</a></li>
<li class="toctree-l3"><a class="reference internal" href="#auth-zxauth-login-page">Custom Login Page</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#enabling-the-login-page">Enabling the Login Page</a></li>
<li class="toctree-l4"><a class="reference internal" href="#customizing-the-login-page">Customizing the Login Page</a></li>
<li class="toctree-l4"><a class="reference internal" href="#viewing-the-current-configuration">Viewing the current configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#auth-zxauth-saml-config">Configuring SAML in Zextras Suite</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#importing-saml-configuration">Importing SAML Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#import-saml-configuration-automatically">Import SAML Configuration Automatically</a></li>
<li class="toctree-l3"><a class="reference internal" href="#import-saml-configuration-manually">Import SAML Configuration Manually</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#auth-zxauth-zimlet">ZxAuth for users (Auth Zimlet)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#zextras-auth-zimlet-overview">Zextras Auth Zimlet overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-new-credentials-text-code">Create New Credentials: Text Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-new-credentials-qr-code">Create New Credentials: QR Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-new-credentials-otp">Create New Credentials: OTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-credentials">Delete Credentials</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#zextras-auth-cli">Zextras Auth CLI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="team.html">Zextras Team</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">CLI</a></li>
</ul>

<hr />
<ul>
  <li class="toctree-l1">
    <a href="/landing/html/home.html">Back to
      Zextras Documentation hub
    </a>
  </li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Zextras Suite</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Zextras Auth</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="admonition note">
<p class="admonition-title">Note</p>
<p>All content is provisional and is meant <strong>only</strong> to showcase
the feature of the new framework.</p>
</div>
<section id="zextras-auth">
<h1>Zextras Auth<a class="headerlink" href="#zextras-auth" title="Permalink to this headline"></a></h1>
<section id="what-is-zextras-auth">
<span id="id1"></span><h2>What is Zextras Auth<a class="headerlink" href="#what-is-zextras-auth" title="Permalink to this headline"></a></h2>
<p>Zextras Auth is the Zextras Suite module that influences the process of
accessing a Zextras instance from the Login Page onwards, including:</p>
<ol class="arabic simple">
<li><p>The access modality. Depending on the authentication backends
configured, the access mask changes, to allow user to provide their
credentials using any of the backends. This also is reflected in the
<a class="reference external" href="#zxauth-zimlet">Auth Zimlet</a>.</p></li>
<li><p>Customisations. How the <a class="reference external" href="#zxauth-login-page">login page</a> looks
like. See the <a class="reference external" href="#zxauth-login-page">dedicated section</a> for a list
of customisable items.</p></li>
</ol>
<p>Zextras Auth allows to manage all the Authentication Strategies
(user/pwd, SAML, 2FA, MobilePwd, QrCode) and Service Authorizations
supported by Zextras.</p>
<p>This section is divided in three main parts and organised as follows.
Immediately below, you can find the description of all supported
authentication methods; the next two sections are dedicated to
<a class="reference external" href="#zxauth-admins">administration tasks</a>, which require privileged
access and are mostly carried out from the CLI, and <a class="reference external" href="#zxauth-zimlet">everyday’s
task</a>, which can be carried out from the Web GUI by
both administrators and users, respectively. Finally, the <a class="reference external" href="#zxauth-cli">list of all
CLI commands</a> is given as a reference, with link to each
command.</p>
<section id="supported-authentication-methods">
<span id="auth-supported-authentication-methods"></span><h3>Supported Authentication Methods<a class="headerlink" href="#supported-authentication-methods" title="Permalink to this headline"></a></h3>
<p>Zextras Auth supports the following backends:</p>
<ul class="simple">
<li><p>Self service credentials management</p>
<ul>
<li><p>Mobile password management</p></li>
<li><p>Application password</p></li>
</ul>
</li>
<li><p>Custom login page</p></li>
<li><p>SAML integration</p></li>
<li><p>2FA Authentication using OTP token</p></li>
<li><p>Credential Management by CLI</p></li>
</ul>
<section id="self-service-credentials-management">
<span id="auth-self-service-credentials-management"></span><h4>Self Service Credentials Management<a class="headerlink" href="#self-service-credentials-management" title="Permalink to this headline"></a></h4>
<p>Self-service credential management allows every user to create new
passwords and QR codes for third-parties—​for example team members,
personal assistants—​accessing her/his email account and Zextras
Applications from mobile devices.</p>
<p>QR Codes in particular can be used to access Zextras Apps, currently
Team and Drive.</p>
<p>More information and step by step guidelines can be found in Section
<a class="reference external" href="#zxauth-zimlet">ZxAuth for users (Auth Zimlet)</a>.</p>
</section>
<section id="custom-login-page">
<span id="auth-custom-login-page"></span><h4>Custom Login Page<a class="headerlink" href="#custom-login-page" title="Permalink to this headline"></a></h4>
<p>All Zextras functionality can be accessed upon login from the <em>login
page</em> of Zextras, which can be customised in several parts, for example
to add the company’s logo or other elements of the company’s corporate
identity.</p>
<p>This feature is carried out from the CLI and therefore requires
administrator privileges; more information and guidelines in section
<a class="reference external" href="#zxauth-login-page">Custom Login Page</a>.</p>
</section>
<section id="saml">
<h4>SAML<a class="headerlink" href="#saml" title="Permalink to this headline"></a></h4>
<p>The Security Assertion Markup Language (<strong>SAML</strong>) is an XML-based open
standard data format for exchanging authentication information. It
enables web-based authentication and authorization scenarios including
cross-domain Single Sign-On (SSO), which allows the use of the same
credentials to access different applications.</p>
<p>SAML implementation in Zextras relies on an external IDentity Provider
(IDP), to which a user identifies; the IDP then passes authorization
credentials to a service providers (SP). SAML authentication is the
process of verifying the user’s identity and credentials. In Zextras
Suite, SAML requires little configuration, because an administrator can
generate the SAML configuration by importing SAML metadata from the ISP.
Each domain can have a different SAML endpoint and both SDP and IDP SAML
authentication is supported.</p>
<p>These are the key concepts of SAML authentication:</p>
<dl class="simple">
<dt>Service Provider</dt><dd><p>(SP) is the entity providing the service.</p>
</dd>
<dt>Identity Provider</dt><dd><p>(IdP) is the entity providing the identities.</p>
</dd>
<dt>SAML Request</dt><dd><p>is generated by the Service Provider to “request” an authentication.</p>
</dd>
<dt>SAML Response</dt><dd><p>is generated by the Identity Provider and contains the assertion of
the authenticated user.</p>
</dd>
</dl>
<p>Moreover, the Assertion Consumer Service (ACS) endpoint is a location to
which the SSO tokens are sent, according to partner requirements.</p>
<p>Directions on how to configure SAML and integrate other applications in
Zextras Suite is described in <a class="reference external" href="#zxauth-saml-config">Configuring SAML in Zextras
Suite</a>.</p>
</section>
<section id="two-factor-authentication">
<span id="auth-two-fa"></span><h4>Two Factor Authentication<a class="headerlink" href="#two-factor-authentication" title="Permalink to this headline"></a></h4>
<p>Two Factor Authentication (usually spelled as <strong>2FA</strong>) adds a security
layer to the login phase, making unwanted accesses less likely to take
place. In Zextras, this additional layer is given by an One Time
Password (OTP), which can be read as a QR code on mobile devices.</p>
<p>When 2FA is configured on a Zextras domain, it is mandatory to have an
OTP to be able to login: providing only username and password will fail.
Moreover, the attribute <code class="docutils literal notranslate"><span class="pre">zimbraAuthMech</span></code> must be configured on the
domain with for 2FA to work properly.</p>
<p>2FA applies only to those protocols or apps supporting it, for example
HTTP and HTTPS but not to IMAP and SMTP, and can be configured at either
device, IP, or IP range level, by means of the <code class="docutils literal notranslate"><span class="pre">trusted_device</span></code> or
<code class="docutils literal notranslate"><span class="pre">trusted_ip</span></code> parameter. When an IP or IP range is trusted, 2FA will be
successful for any login originating from there, while the
<code class="docutils literal notranslate"><span class="pre">trusted_device</span></code> requires that the same browser or app be used,
otherwise it will fail: if a 2FA login is carried out on Chrome,
accessing the same page with Firefox will require a new login.</p>
<p>In order to use the OTP, a domain must be configured (see <a class="reference external" href="#qr-code-req">QR Code
Requirements</a>) by the site admin, while users can
configure it using the <a class="reference external" href="#zimlet-create-otp">Auth Zimlet</a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Community Article</p>
<p><a class="reference external" href="https://community.zextras.com/improve-the-security-using-zextras-2fa/">https://community.zextras.com/improve-the-security-using-zextras-2fa/</a></p>
<p>This article showcases a few deployment scenarios of 2FA in Zextras
and describes how Administrators can take advantage of such
architecture.</p>
</div>
</section>
</section>
</section>
<section id="zxauth-for-admins">
<span id="auth-zxauth-admins"></span><h2>ZxAuth for Admins<a class="headerlink" href="#zxauth-for-admins" title="Permalink to this headline"></a></h2>
<p>This section is dedicated to administrators and the activities they can
carry out to manage and maintain Zextras Auth. Here administrators can
find the requirements for the various authentication methods, then the
installation instructions. Credential management follows, with the
option to customise the login page at the end.</p>
<section id="requirements">
<span id="auth-requirements"></span><h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline"></a></h3>
<section id="auth-qr-code-req">
<span id="id4"></span><h4>QR Code Requirements<a class="headerlink" href="#auth-qr-code-req" title="Permalink to this headline"></a></h4>
<p>The QR Code Application Password feature requires the following
properties to be set at domain level in order to be functional:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">zimbraPublicServiceHostname</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">zimbraPublicServicePort</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">zimbraPublicServiceProtocol</span></code></p></li>
</ul>
<p>Should one or more of the properties be unset, a notification will be
delivered to the Admin reporting the affected domains and their missing
properties.</p>
</section>
<section id="fa-requirements">
<span id="auth-2fa-requirements"></span><h4>2FA Requirements<a class="headerlink" href="#fa-requirements" title="Permalink to this headline"></a></h4>
<p>In order to properly have 2FA set up, the <code class="docutils literal notranslate"><span class="pre">zimbraAuthMech</span></code> attribute
bust be configured at domain level:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">zmprov</span> <span class="n">modifyDomain</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="n">zimbraAuthMech</span> <span class="n">custom</span><span class="p">:</span><span class="n">zx</span>
</pre></div>
</div>
<p>To enable 2FA it is also necessary to:</p>
<ul class="simple">
<li><p>Enter the addresses of all mailbox and MTAs as ‘ZimbraMailTrustedIp’</p></li>
<li><p>A ‘trusted ip range’ must be defined for all services</p></li>
<li><p>For all services the ‘ipcanchange’ attribute must be validated on
‘true’ and ‘trustedDevice = 1’</p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>2FA requires a specific zimbraAuthMech and this make it
not compatible with other mechanism such as ldap, ad or kerberos5</p>
</div>
</section>
<section id="saml-requirements">
<span id="auth-saml-requirements"></span><h4>SAML Requirements<a class="headerlink" href="#saml-requirements" title="Permalink to this headline"></a></h4>
<p>Before enabling SAML login, it is necessary to modify the Zextras
Backend processing, because these header attributes are required to
compose the complete URL request: <strong>Protocol X</strong> and <strong>X-Port</strong>.</p>
<p>The files affected by this change are the templates:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">nginx.conf.web.http.default.template</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nginx.conf.web.http.template</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nginx.conf.web.https.default.template</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nginx.conf.web.https.template</span></code></p></li>
</ul>
<p>In each of them, the <code class="docutils literal notranslate"><span class="pre">location</span> <span class="pre">^~</span> <span class="pre">/zx/</span></code> code should be changed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>location ^~ /zx/
  {
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header Host $http_host;
      proxy_set_header X-Forwarded-Proto $scheme;
      proxy_set_header X-Forwarded-Port $server_port;
      proxy_pass ${web.upstream.zx};
  }
</pre></div>
</div>
</section>
</section>
<section id="installing-the-zextras-auth-zimlet">
<span id="auth-installing-the-zextras-auth-zimlet"></span><h3>Installing the Zextras Auth Zimlet<a class="headerlink" href="#installing-the-zextras-auth-zimlet" title="Permalink to this headline"></a></h3>
<p>To deploy the Zextras Auth Zimlet, simply run <code class="docutils literal notranslate"><span class="pre">zxsuite</span> <span class="pre">auth</span>
<span class="pre">doDeployAuthZimlet</span></code> as the zimbra user on any mailbox server of your
infrastructure.</p>
</section>
<section id="auth-zxauth-login-page">
<span id="id5"></span><h3>Custom Login Page<a class="headerlink" href="#auth-zxauth-login-page" title="Permalink to this headline"></a></h3>
<p>The Auth module provides the ability to customise the Login Page as it
is seen by other user.</p>
<p>The login page can be set at domain level and customized in terms of
title, logo, background and favicon.</p>
<section id="enabling-the-login-page">
<span id="auth-enabling-the-login-page"></span><h4>Enabling the Login Page<a class="headerlink" href="#enabling-the-login-page" title="Permalink to this headline"></a></h4>
<p>To enable the Login Page for a domain (we use <strong>example.com</strong>), set the
<code class="docutils literal notranslate"><span class="pre">zimbraWebClientLoginURL</span></code> and <code class="docutils literal notranslate"><span class="pre">zimbraWebClientLogoutURL</span></code>
configuration keys. You can do so from the GUI by adding the following
two values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Web client login redirect URL:     /zx/login/page/?domain=example.com
Web client logout redirect URL:    /zx/auth/logout/
</pre></div>
</div>
<p>The same action can be done by using the following CLI command, which
configures also the authentication method (<code class="docutils literal notranslate"><span class="pre">zimbraAuthMech</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>zmprov md example.com zimbraAuthMech custom:zx zimbraWebClientLoginURL /zx/login/page/?domain=example.com zimbraWebClientLogoutURL /zx/auth/logout/
</pre></div>
</div>
</section>
<section id="customizing-the-login-page">
<span id="auth-customizing-the-login-page"></span><h4>Customizing the Login Page<a class="headerlink" href="#customizing-the-login-page" title="Permalink to this headline"></a></h4>
<p>The Login Page can be customized through the use of the <code class="docutils literal notranslate"><span class="pre">loginPage</span></code>
Auth CLI command.</p>
<section id="image-file-locations-and-sizes">
<span id="auth-image-file-locations-and-sizes"></span><h5>Image File Locations and Sizes<a class="headerlink" href="#image-file-locations-and-sizes" title="Permalink to this headline"></a></h5>
<p>Zextras Auth offers two options for custom image files used by the Login
Page, either by embedding remote image files or hosting them locally.
Image files can be used for logo, background, and favicon.</p>
<ul class="simple">
<li><p><strong>Remote File</strong>. The image is available on a public online resource
(like, e.g., a corporate server or a hosting service) and can be
directly accessed. When adopting this approach, use the full URL to
the resource in the CLI command, for example:
<code class="docutils literal notranslate"><span class="pre">https://www.example.com/resources/logo.png</span></code></p></li>
</ul>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>This is the preferred alternative.</p>
</div>
<ul class="simple">
<li><p><strong>Local File</strong>. The image is hosted locally and must be stored in a
directory under <code class="docutils literal notranslate"><span class="pre">/opt/zimbra/jetty/webapps/zimbra/public/</span></code>. When
configuring it, the relative path to the file from the
<code class="docutils literal notranslate"><span class="pre">/opt/zimbra/jetty/webapps/zimbra/</span></code> base path must be used. If the
file is saved as
<code class="docutils literal notranslate"><span class="pre">/opt/zimbra/jetty/webapps/zimbra/public/logo.png</span></code>, then use
<code class="docutils literal notranslate"><span class="pre">/public/logo.png</span></code></p></li>
</ul>
<p>The optimal size for a logo image is 320x80. Other sizes can be used but
the logo image could be stretched or scaled resulting in poor quality.
The aspect ratio of 4:1 should always be maintained.</p>
<p>While the optimal size for the background image depends on the
resolution of the client’s screen, it’s stongly advised to avoid images
smaller than the current standard monitor resolutions to avoid vertical
or horizontal bars to be displayed on screens with a bigger resolution
than the background image.</p>
</section>
<section id="login-page-title">
<span id="auth-login-page-title"></span><h5>Login Page Title<a class="headerlink" href="#login-page-title" title="Permalink to this headline"></a></h5>
<p>The login page title can be modified by using either of the following
commands:</p>
<ul class="simple">
<li><p><em>global</em> level <a class="reference external" href="./cli.xml#auth_loginpage_setTitle_global.adoc">zxsuite auth loginPage setTitle
global</a></p></li>
</ul>
<div class="informalexample docutils container">
<p>zxsuite auth loginPage setTitle global <em>‘My Custom Login Page’</em></p>
</div>
<ul class="simple">
<li><p><em>domain</em> level <a class="reference external" href="./cli.xml#auth_loginpage_setTitle_domain.adoc">zxsuite auth loginPage setTitle
domain</a></p></li>
</ul>
<div class="informalexample docutils container">
<p>zxsuite auth loginPage setTitle domain <em>domain</em> <em>‘My Custom Login
Page’</em></p>
</div>
</section>
</section>
<section id="viewing-the-current-configuration">
<span id="auth-viewing-the-current-configuration"></span><h4>Viewing the current configuration<a class="headerlink" href="#viewing-the-current-configuration" title="Permalink to this headline"></a></h4>
<p>The current Login Page settings for a domain can be viewed by using the
<a class="reference external" href="./cli.xml#auth_loginpage_getConfig_domain.adoc">zxsuite auth loginPage getConfig
domain</a> command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>~$ zxsuite auth loginPage getConfig domain example.com

        zimbraPublicServiceHostname                         mail.example.com
        loginPageBackgroundImage                            /public/background.jpg
        zimbraPublicServicePort                             443
        zimbraPublicServiceProtocol                         https
        zimbraDomainName                                    example.com
        publicUrl                                           https://mail.example.com
        loginPageLogo                                       /public/logo.png
</pre></div>
</div>
</section>
</section>
<section id="auth-zxauth-saml-config">
<span id="id6"></span><h3>Configuring SAML in Zextras Suite<a class="headerlink" href="#auth-zxauth-saml-config" title="Permalink to this headline"></a></h3>
</section>
</section>
<section id="importing-saml-configuration">
<span id="auth-importing-saml-configuration"></span><h2>Importing SAML Configuration<a class="headerlink" href="#importing-saml-configuration" title="Permalink to this headline"></a></h2>
<p>You can integrate a SAML application in Zextras in two ways — automatic
and manual. The following sections describe each method in detail.</p>
<section id="import-saml-configuration-automatically">
<span id="auth-import-saml-configuration-automatically"></span><h3>Import SAML Configuration Automatically<a class="headerlink" href="#import-saml-configuration-automatically" title="Permalink to this headline"></a></h3>
<p>To integrate a SAML application into Zextras automatically, you need to
configure the IDP using the Zextras SAML SDP data, which can be obtained
from the following URI:</p>
<p><a class="reference external" href="https://ZIMBRA_PUBLIC_URL/zx/auth/samlMetadata?domain=example.com">https://ZIMBRA_PUBLIC_URL/zx/auth/samlMetadata?domain=example.com</a></p>
<p>Here, <strong>ZIMBRA_PUBLIC_URL</strong> is the URL of the Zextras instance and
<strong>example.com</strong> is the domain for which you want to enable SAML.</p>
<p>Above all, the following parameters must be taken into account:</p>
<ul class="simple">
<li><p>“sp.nameidformat”: “<a class="reference external" href="urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress">urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress</a> “,</p></li>
<li><p>“sp.entityid”: &gt;&gt;https://ZIMBRA_PUBLIC_URL/zx/auth/samlMetadata?domain=example.com&lt;&lt;,</p></li>
<li><p>“sp.assertion_consumer_service.url”: &gt;&gt;https://ZIMBRA_PUBLIC_URL/zx/auth/saml&lt;&lt;,</p></li>
</ul>
<p>Once the IDP is configured and you have the IDP metadata URL, you can
import the configuration using the command (assuming the IDP metadata
are in <a class="reference external" href="https://localidp.local.loc/simplesamlphp/saml2/idp/metadata.php">https://localidp.local.loc/simplesamlphp/saml2/idp/metadata.php</a>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>zxsuite auth saml import example.com URL  https://localidp.local.loc/simplesamlphp/saml2/idp/metadata.php
</pre></div>
</div>
<p>If the IDP is using an unsecured connection or a self signed
certificate, the command will be this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>zxsuite auth saml import example.com url https://localidp.local.loc/app/xxxxxxxxxxxxxxx/sso/saml/metadata allow_insecure <span class="nb">true</span>
</pre></div>
</div>
<p>You are now DONE! You can see the SAML button.</p>
</section>
<section id="import-saml-configuration-manually">
<span id="auth-import-saml-configuration-manually"></span><h3>Import SAML Configuration Manually<a class="headerlink" href="#import-saml-configuration-manually" title="Permalink to this headline"></a></h3>
<p>If you need to manually edit the SAML configuration, you can:</p>
<ol class="arabic simple">
<li><p>Export the default SAML settings using:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>zxsuite auth saml get example.com export_to /tmp/saml.json
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Open the resulting file /tmp/saml.json in any editor and modify the
requested attributes</p>
<ul class="simple">
<li><p>entityid</p></li>
<li><p>assertion_consumer_service.url</p></li>
<li><p>nameidformat</p></li>
</ul>
</li>
<li><p>Save the changes made to the file and import it into Zextras Suite
using the command:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>zxsuite auth saml import example.com /tmp/saml.json
</pre></div>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>It is also possible to view or edit single attributes by
using the <code class="docutils literal notranslate"><span class="pre">zxsuite</span> <span class="pre">auth</span> <span class="pre">saml</span> <span class="pre">get</span></code> and <code class="docutils literal notranslate"><span class="pre">zxsuite</span> <span class="pre">auth</span> <span class="pre">saml</span> <span class="pre">set</span></code>
command options.</p>
</div>
</section>
</section>
<section id="auth-zxauth-zimlet">
<span id="id7"></span><h2>ZxAuth for users (Auth Zimlet)<a class="headerlink" href="#auth-zxauth-zimlet" title="Permalink to this headline"></a></h2>
<p>Zextras Auth features a dedicated zimlet to manage all user-side
credential and features, such as the EAS Mobile Password, Mobile App QR
Codes, and OTP for <a class="reference external" href="#two-fa">Two Factor Authentication</a>.</p>
<section id="zextras-auth-zimlet-overview">
<span id="auth-zextras-auth-zimlet-overview"></span><h3>Zextras Auth Zimlet overview<a class="headerlink" href="#zextras-auth-zimlet-overview" title="Permalink to this headline"></a></h3>
<p>The Zextras Auth Zimlet can be accessed from the “Zimlets” section of
the Zimbra Web Client. Users do not need any CLI access to use the
Zextras Auth.</p>
<p>The creation of a new credential allows to give access to the account,
possibly including the Zextras Mobile Apps, to other persons without
having to share the personal credentials.</p>
<img alt="_images/zextras_auth_overview.png" src="_images/zextras_auth_overview.png" />
<p>From the zimlet, the user can:</p>
<ul class="simple">
<li><p><strong>Add new credentials</strong> by clicking on either Authentication Type
(for text codes and QR codes) or One Time Password</p></li>
<li><p><strong>Check the status</strong> and other information for every <em>Authentication
Type</em> created. Each entry of the list displays the label of the
password, its status, the service it is valid for, and its creation
date.</p></li>
<li><p><strong>Check the status</strong> and other information for every <em>One Time
Password</em>. Here, each entry shows a description, its status, the
failed attempts, and its creation date.</p></li>
<li><p><strong>Manage</strong> the 2FA access. Each user can decide whether to enforce
access using 2FA, unless its use has been enabled or disabled at COS,
domain, or global level. In this case, only a greyed-out checkbox is
shown.</p></li>
<li><p><strong>Delete</strong> any credential created, by simply selecting it and
clicking on the DELETE button</p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Users can in no case modify their assigned credentials,
change the password of credentials they generate, or modify any
property of the credential. Limited editing of a credential is
strictly limited to the administrators.</p>
</div>
<p>In the remainder of this section, we give an overview of the various
possibilities.</p>
</section>
<section id="create-new-credentials-text-code">
<span id="auth-zimlet-create-mobile"></span><h3>Create New Credentials: Text Code<a class="headerlink" href="#create-new-credentials-text-code" title="Permalink to this headline"></a></h3>
<p>To create a new Mobile Password (for <strong>EAS</strong> service), open the Zextras
Auth Zimlet and click on Authentication type, then on NEW
AUTHENTICATION.</p>
<ul>
<li><p>Here, enter an easy to remember identifier for the password in the
<em>Authentication description</em> field and select <strong>Text code</strong> as the
<em>Authentication mode</em>:</p>
<img alt="_images/zextras_auth_mobilepass1.png" src="_images/zextras_auth_mobilepass1.png" />
</li>
<li><p>Click Next. The new Mobile Password will be displayed:</p>
<img alt="_images/zextras_auth_mobilepass2.png" src="_images/zextras_auth_mobilepass2.png" />
</li>
<li><p>Click on the small blue icon on the right-hand side of the password
to copy it to the clipboard.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Mobile Passwords are randomly generated and cannot be
displayed again after the creation is complete.</p>
</div>
</li>
<li><p>Click on DONE to close the Zextras Auth window. An entry for the new
Mobile Password is now visible in the <em>Active Passwords</em> list of the
Zextras Auth Zimlet.</p></li>
</ul>
<img alt="_images/zextras_auth_mobilepass3.png" src="_images/zextras_auth_mobilepass3.png" />
</section>
<section id="create-new-credentials-qr-code">
<span id="auth-create-new-credentials-qr-code"></span><h3>Create New Credentials: QR Code<a class="headerlink" href="#create-new-credentials-qr-code" title="Permalink to this headline"></a></h3>
<p>Zextras Auth can speed up and manage Zextras Application logins, such as
those for the <a class="reference external" href="team.html#_mobile_app">Team App</a> and <a class="reference external" href="drive.html#_mobile_app">Drive
App</a>.</p>
<p>This is achieved through the creation of a QR Code, which the user can
then scan from the App’s login page to log in. The procedure is very
similar to the one described in the previous section.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>QR Codes are a one-time credential only, meaning that
once generated it will grant access to the app until the relevant
credential itself is deleted from the account. Once generated, the
QR Code can only be viewed once.</p>
</div>
<p>In order to create a new QR Code for Mobile Application, open the
Zextras Auth Zimlet and click on Authentication type, then on NEW
AUTHENTICATION.</p>
<ul>
<li><p>Here, enter an easy to remember identifier for the password in the
<em>Authentication description</em> field and select <strong>QR code</strong> as the
<em>Authentication mode</em>:</p>
<img alt="_images/zextras_auth_qrcode1.png" src="_images/zextras_auth_qrcode1.png" />
</li>
<li><p>Click Next. The QR code for Mobile Application will be displayed:</p>
<img alt="_images/zextras_auth_qrcode2.png" src="_images/zextras_auth_qrcode2.png" />
</li>
</ul>
<p>Use the Zextras mobile app to frame the code and grant access to the
app.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>QR Codes are randomly generated and cannot be displayed
again after the creation is complete.</p>
</div>
<ul>
<li><p>Click on DONE to close the Zextras Auth window. An entry for the new
Mobile Application is now visible in the <em>Active Passwords</em> list of
the Zextras Auth Zimlet.</p>
<img alt="_images/zextras_auth_qrcode3.png" src="_images/zextras_auth_qrcode3.png" />
</li>
</ul>
</section>
<section id="create-new-credentials-otp">
<span id="auth-zimlet-create-otp"></span><h3>Create New Credentials: OTP<a class="headerlink" href="#create-new-credentials-otp" title="Permalink to this headline"></a></h3>
<p>In order to create a new QR Code for One Time Password access, open the
Zextras Auth Zimlet and click on One Time Password, then on NEW OTP.</p>
<img alt="_images/zextras_auth_otp1.png" src="_images/zextras_auth_otp1.png" />
<ul>
<li><p>No additional step is required, you will be presented with the QR
code and a list of PIN codes to be used for authentication.</p>
<img alt="_images/zextras_auth_otp2.png" src="_images/zextras_auth_otp2.png" />
</li>
<li><p>Click on the small blue icon on the right-hand side of the PIN list
to print the codes on paper or to a file.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>QR codes and their associated PINs are randomly
generated and cannot be displayed again after the creation is
complete.</p>
</div>
</li>
<li><p>Click on DONE to close the Zextras Auth window. An entry for the new
OTP entry will be shown in the list.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <em>Description</em> is automatically created using the email
address to which it is associated.</p>
</div>
<img alt="_images/zextras_auth_otp3.png" src="_images/zextras_auth_otp3.png" />
</section>
<section id="delete-credentials">
<span id="auth-delete-credentials"></span><h3>Delete Credentials<a class="headerlink" href="#delete-credentials" title="Permalink to this headline"></a></h3>
<p>In order to delete a credential, simply select it from the list of
Active passwords or OTPs, and click on the DELETE button:</p>
<img alt="_images/zextras_auth_delete_credential.png" src="_images/zextras_auth_delete_credential.png" />
<p>Click on YES to confirm the removal of the credential.</p>
</section>
</section>
<section id="zextras-auth-cli">
<span id="auth-zxauth-cli"></span><h2>Zextras Auth CLI<a class="headerlink" href="#zextras-auth-cli" title="Permalink to this headline"></a></h2>
<p>This section contains the index of all the available <code class="docutils literal notranslate"><span class="pre">zextras</span> <span class="pre">auth</span></code>
commands. Full reference can be found in <a class="reference external" href="./cli.xml#_zxauth_cli_commands">the dedicated
section</a>.</p>
<p><a class="reference external" href="./cli.xml#auth_credential_add">credential add</a> | <a class="reference external" href="./cli.xml#auth_credential_delete">credential
delete</a> | <a class="reference external" href="./cli.xml#auth_credential_list">credential
list</a> | <a class="reference external" href="./cli.xml#auth_credential_update">credential
update</a> |
<a class="reference external" href="./cli.xml#auth_doDeployAuthZimlet">doDeployAuthZimlet</a> |
<a class="reference external" href="./cli.xml#auth_doRestartService">doRestartService</a> |
<a class="reference external" href="./cli.xml#auth_doStartService">doStartService</a> |
<a class="reference external" href="./cli.xml#auth_doStopService">doStopService</a> | <a class="reference external" href="./cli.xml#auth_enforce2FA_get_account">enforce2FA get
account</a> | <a class="reference external" href="./cli.xml#auth_enforce2FA_get_cos">enforce2FA get
cos</a> | <a class="reference external" href="./cli.xml#auth_enforce2FA_set_account">enforce2FA set
account</a> | <a class="reference external" href="./cli.xml#auth_enforce2FA_set_cos">enforce2FA set
cos</a> |
<a class="reference external" href="./cli.xml#auth_getServices">getServices</a> | <a class="reference external" href="./cli.xml#auth_loginPage_getBackgroundImage_domain">loginPage
getBackgroundImage
domain</a> |
<a class="reference external" href="./cli.xml#auth_loginPage_getBackgroundImage_global">loginPage getBackgroundImage
global</a> |
<a class="reference external" href="./cli.xml#auth_loginPage_getColorPalette_domain">loginPage getColorPalette
domain</a> |
<a class="reference external" href="./cli.xml#auth_loginPage_getColorPalette_global">loginPage getColorPalette
global</a> |
<a class="reference external" href="./cli.xml#auth_loginPage_getConfig_domain">loginPage getConfig
domain</a> | <a class="reference external" href="./cli.xml#auth_loginPage_getConfig_global">loginPage
getConfig global</a> |
<a class="reference external" href="./cli.xml#auth_loginPage_getFavicon_domain">loginPage getFavicon
domain</a> | <a class="reference external" href="./cli.xml#auth_loginPage_getFavicon_global">loginPage
getFavicon global</a> |
<a class="reference external" href="./cli.xml#auth_loginPage_getLogo_domain">loginPage getLogo domain</a>
| <a class="reference external" href="./cli.xml#auth_loginPage_getLogo_global">loginPage getLogo
global</a> | <a class="reference external" href="./cli.xml#auth_loginPage_getSkinLogoAppBanner_domain">loginPage
getSkinLogoAppBanner
domain</a> |
<a class="reference external" href="./cli.xml#auth_loginPage_getSkinLogoAppBanner_global">loginPage getSkinLogoAppBanner
global</a> |
<a class="reference external" href="./cli.xml#auth_loginPage_getSkinLogoURL_domain">loginPage getSkinLogoURL
domain</a> | <a class="reference external" href="./cli.xml#auth_loginPage_getSkinLogoURL_global">loginPage
getSkinLogoURL
global</a> | <a class="reference external" href="./cli.xml#auth_loginPage_getTitle_domain">loginPage
getTitle domain</a> |
<a class="reference external" href="./cli.xml#auth_loginPage_getTitle_global">loginPage getTitle global</a>
| <a class="reference external" href="./cli.xml#auth_loginPage_setBackgroundImage_domain">loginPage setBackgroundImage
domain</a> |
<a class="reference external" href="./cli.xml#auth_loginPage_setBackgroundImage_global">loginPage setBackgroundImage
global</a> |
<a class="reference external" href="./cli.xml#auth_loginPage_setColorPalette_domain">loginPage setColorPalette
domain</a> |
<a class="reference external" href="./cli.xml#auth_loginPage_setColorPalette_global">loginPage setColorPalette
global</a> |
<a class="reference external" href="./cli.xml#auth_loginPage_setFavicon_domain">loginPage setFavicon
domain</a> | <a class="reference external" href="./cli.xml#auth_loginPage_setFavicon_global">loginPage
setFavicon global</a> |
<a class="reference external" href="./cli.xml#auth_loginPage_setLogo_domain">loginPage setLogo domain</a>
| <a class="reference external" href="./cli.xml#auth_loginPage_setLogo_global">loginPage setLogo
global</a> | <a class="reference external" href="./cli.xml#auth_loginPage_setSkinLogoAppBanner_domain">loginPage
setSkinLogoAppBanner
domain</a> |
<a class="reference external" href="./cli.xml#auth_loginPage_setSkinLogoAppBanner_global">loginPage setSkinLogoAppBanner
global</a> |
<a class="reference external" href="./cli.xml#auth_loginPage_setSkinLogoURL_domain">loginPage setSkinLogoURL
domain</a> | <a class="reference external" href="./cli.xml#auth_loginPage_setSkinLogoURL_global">loginPage
setSkinLogoURL
global</a> | <a class="reference external" href="./cli.xml#auth_loginPage_setTitle_domain">loginPage
setTitle domain</a> |
<a class="reference external" href="./cli.xml#auth_loginPage_setTitle_global">loginPage setTitle global</a>
| <a class="reference external" href="./cli.xml#auth_policy_list_domain">policy list domain</a> | <a class="reference external" href="./cli.xml#auth_policy_list_global">policy
list global</a> | <a class="reference external" href="./cli.xml#auth_policy_set_Cli_domain">policy set Cli
domain</a> | <a class="reference external" href="./cli.xml#auth_policy_set_Cli_global">policy set Cli
global</a> | <a class="reference external" href="./cli.xml#auth_policy_set_Dav_domain">policy set Dav
domain</a> | <a class="reference external" href="./cli.xml#auth_policy_set_Dav_global">policy set Dav
global</a> | <a class="reference external" href="./cli.xml#auth_policy_set_EAS_domain">policy set EAS
domain</a> | <a class="reference external" href="./cli.xml#auth_policy_set_EAS_global">policy set EAS
global</a> | <a class="reference external" href="./cli.xml#auth_policy_set_Imap_domain">policy set Imap
domain</a> | <a class="reference external" href="./cli.xml#auth_policy_set_Imap_global">policy set Imap
global</a> | <a class="reference external" href="./cli.xml#auth_policy_set_MobileApp_domain">policy set
MobileApp domain</a> |
<a class="reference external" href="./cli.xml#auth_policy_set_MobileApp_global">policy set MobileApp
global</a> | <a class="reference external" href="./cli.xml#auth_policy_set_Pop3_domain">policy set
Pop3 domain</a> | <a class="reference external" href="./cli.xml#auth_policy_set_Pop3_global">policy set
Pop3 global</a> | <a class="reference external" href="./cli.xml#auth_policy_set_Smtp_domain">policy set
Smtp domain</a> | <a class="reference external" href="./cli.xml#auth_policy_set_Smtp_global">policy set
Smtp global</a> | <a class="reference external" href="./cli.xml#auth_policy_set_WebAdminUI_domain">policy set
WebAdminUI domain</a> |
<a class="reference external" href="./cli.xml#auth_policy_set_WebAdminUI_global">policy set WebAdminUI
global</a> | <a class="reference external" href="./cli.xml#auth_policy_set_WebUI_domain">policy set
WebUI domain</a> | <a class="reference external" href="./cli.xml#auth_policy_set_WebUI_global">policy set
WebUI global</a> | <a class="reference external" href="./cli.xml#auth_policy_set_ZmWebUI_domain">policy set
ZmWebUI domain</a> | <a class="reference external" href="./cli.xml#auth_policy_set_ZmWebUI_global">policy
set ZmWebUI global</a> |
<a class="reference external" href="./cli.xml#auth_policy_trustedDevice_getExpiration_domain">policy trustedDevice getExpiration
domain</a> |
<a class="reference external" href="./cli.xml#auth_policy_trustedDevice_getExpiration_global">policy trustedDevice getExpiration
global</a> |
<a class="reference external" href="./cli.xml#auth_policy_trustedDevice_setExpiration_domain">policy trustedDevice setExpiration
domain</a> |
<a class="reference external" href="./cli.xml#auth_policy_trustedDevice_setExpiration_global">policy trustedDevice setExpiration
global</a> |
<a class="reference external" href="./cli.xml#auth_saml_delete">saml delete</a> | <a class="reference external" href="./cli.xml#auth_saml_get">saml
get</a> | <a class="reference external" href="./cli.xml#auth_saml_import">saml
import</a> | <a class="reference external" href="./cli.xml#auth_saml_update">saml
update</a> | <a class="reference external" href="./cli.xml#auth_saml_validate">saml
validate</a> | <a class="reference external" href="./cli.xml#auth_token_invalidate">token
invalidate</a> | <a class="reference external" href="./cli.xml#auth_token_list">token
list</a> | <a class="reference external" href="./cli.xml#auth_totp_delete">totp
delete</a> | <a class="reference external" href="./cli.xml#auth_totp_generate">totp
generate</a> | <a class="reference external" href="./cli.xml#auth_totp_list">totp
list</a> | <a class="reference external" href="./cli.xml#auth_trustedDevice_delete">trustedDevice
delete</a> | <a class="reference external" href="./cli.xml#auth_trustedDevice_list">trustedDevice
list</a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="docs.html" class="btn btn-neutral float-left" title="Zextras Docs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="team.html" class="btn btn-neutral float-right" title="Zextras Team" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, The Zextras Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>