<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Zextras Powerstore &mdash; Zextras Suite 0.1-alpha documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/design-style.d53ab927f7bad3eaa42da95908504b10.min.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/suite.css" type="text/css" />
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/design-tabs.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Zextras Admin" href="admin.html" />
    <link rel="prev" title="Zextras Mobile" href="mobile.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
   <a href="index.html" class="icon icon-home"> Zextras Suite
</a>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="general.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Zextras Suite Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="backup.html">Zextras Backup</a></li>
<li class="toctree-l1"><a class="reference internal" href="restorestrategies.html">Zextras Backup Restore Strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="advancedbackup.html">Zextras Backup Advanced techniques</a></li>
<li class="toctree-l1"><a class="reference internal" href="mobile.html">Zextras Mobile</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Zextras Powerstore</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#zimbra-stores">Zimbra Stores</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-basics-types-of-stores-and-their-uses">The Basics: Types of Stores and Their Uses</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#primary-and-secondary-data-stores">Primary and Secondary Data Stores</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#zextras-powerstore-moving-items-between-stores">Zextras Powerstore: Moving Items between Stores</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#centralized-storage">Centralized Storage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#enabling-centralized-storage">Enabling Centralized Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#centralized-storage-structure">Centralized Storage Structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#volume-management">Volume Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#zimbra-volumes">Zimbra Volumes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#volume-properties">Volume Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#local-volumes">Local Volumes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#current-volumes">Current Volumes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#volume-management-with-zextras-powerstore-administration-zimlet">Volume Management with Zextras Powerstore - Administration Zimlet</a></li>
<li class="toctree-l4"><a class="reference internal" href="#volume-management-with-zextras-powerstore-from-the-cli">Volume Management with Zextras Powerstore - From the CLI</a></li>
<li class="toctree-l4"><a class="reference internal" href="#volume-deletion">Volume Deletion</a></li>
<li class="toctree-l4"><a class="reference internal" href="#move-all-data-from-a-volume-to-another">Move all data from a volume to another</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#hierarchical-storage-management">Hierarchical Storage Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-hierarchical-storage-management-technique">The Hierarchical Storage Management Technique</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#stores-volumes-and-policies">Stores, Volumes and Policies</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#domoveblobs">doMoveBlobs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-domoveblobs-operation-of-zextras-powerstore">The doMoveBlobs Operation of Zextras Powerstore</a></li>
<li class="toctree-l4"><a class="reference internal" href="#executing-the-domoveblobs-operation-a-k-a-applying-the-hsm-policy">Executing the doMoveBlobs Operation (a.k.a. Applying the HSM Policy)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#domoveblobs-stats-and-info">doMoveBlobs Stats and Info</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#policy-management">Policy Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-is-a-policy">What is a Policy?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#policy-examples">Policy Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#defining-a-policy">Defining a Policy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#from-the-administration-zimlet">From the Administration Zimlet</a></li>
<li class="toctree-l4"><a class="reference internal" href="#from-the-cli">From the CLI</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#zextras-powerstore-and-s3-buckets">Zextras Powerstore and S3 buckets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pws-s3-compatible-services">S3-compatible Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="#primary-volumes-and-the-incoming-directory">Primary Volumes and the “Incoming” directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#local-cache">Local Cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bucket-setup">Bucket Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bucket-management">Bucket Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bucket-paths-and-naming">Bucket paths and naming</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-volumes-with-zextras-powerstore">Creating Volumes with Zextras Powerstore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#editing-volumes-with-zextras-powerstore">Editing Volumes with Zextras Powerstore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deleting-volumes-with-zextras-powerstore">Deleting Volumes with Zextras Powerstore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#amazon-s3-tips">Amazon S3 Tips</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bucket">Bucket</a></li>
<li class="toctree-l4"><a class="reference internal" href="#user">User</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rights-management">Rights Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pws-bucket-paths-and-naming-2">Bucket Paths and Naming</a></li>
<li class="toctree-l4"><a class="reference internal" href="#infrequent-access-storage-class">Infrequent Access Storage Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="#intelligent-tiering-storage-class">Intelligent Tiering Storage Class</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#item-deduplication">Item Deduplication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-is-item-deduplication">What is Item Deduplication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#item-deduplication-in-zimbra">Item Deduplication in Zimbra</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#item-deduplication-and-zextras-powerstore">Item Deduplication and Zextras Powerstore</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#running-a-volume-deduplication">Running a Volume Deduplication</a></li>
<li class="toctree-l4"><a class="reference internal" href="#via-the-administration-zimlet">Via the Administration Zimlet</a></li>
<li class="toctree-l4"><a class="reference internal" href="#via-the-cli">Via the CLI</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dodeduplicate-stats"><code class="docutils literal notranslate"><span class="pre">doDeduplicate</span></code> Stats</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-volume-operations">Advanced Volume Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#zextras-powerstore-more-than-meets-the-eye">Zextras Powerstore: More than Meets the Eye</a></li>
<li class="toctree-l3"><a class="reference internal" href="#volume-operations-at-a-glance">Volume Operations at a Glance</a></li>
<li class="toctree-l3"><a class="reference internal" href="#volume-operation-analysis">Volume Operation Analysis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#docheckblobs">doCheckBlobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dodeduplicate">doDeduplicate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dovolumetovolumemove">doVolumeToVolumeMove</a></li>
<li class="toctree-l4"><a class="reference internal" href="#getvolumestats">getVolumeStats</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#moving-mailboxes-between-mailstores">Moving Mailboxes Between Mailstores</a></li>
<li class="toctree-l2"><a class="reference internal" href="#zextras-powerstore-attachment-indexing">Zextras Powerstore Attachment Indexing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-indexing-works">How Indexing Works</a></li>
<li class="toctree-l3"><a class="reference internal" href="#indexed-formats">Indexed Formats</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#web">Web</a></li>
<li class="toctree-l4"><a class="reference internal" href="#documents">Documents</a></li>
<li class="toctree-l4"><a class="reference internal" href="#packages-and-archives">Packages and Archives</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#parser-controls">Parser Controls</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pws-external-content-extractor">External Content Extractor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#why-use-tika-server-as-content-extractor">Why use Tika Server as Content Extractor?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#switching-to-the-tika-server">Switching to the Tika Server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#add-a-tika-server">Add a Tika Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#list-tika-servers">List Tika Servers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#remove-a-tika-server">Remove a Tika Server</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#is-the-tika-server-running">Is the Tika Server Running?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#zextras-powerstore-cli">Zextras Powerstore CLI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="admin.html">Zextras Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="drive.html">Zextras Drive</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs.html">Zextras Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="auth.html">Zextras Auth</a></li>
<li class="toctree-l1"><a class="reference internal" href="team.html">Zextras Team</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">CLI</a></li>
</ul>

<hr />
<ul>
  <li class="toctree-l1">
    <a href="/landing/html/home.html">Back to
      Zextras Documentation hub
    </a>
  </li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Zextras Suite</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Zextras Powerstore</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="admonition note">
<p class="admonition-title">Note</p>
<p>All content is provisional and is meant <strong>only</strong> to showcase
the feature of the new framework.</p>
</div>
<section id="zextras-powerstore">
<h1>Zextras Powerstore<a class="headerlink" href="#zextras-powerstore" title="Permalink to this headline"></a></h1>
<section id="introduction">
<span id="pws-introduction"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline"></a></h2>
<p>Each Zextras Suite installation consists of one primary volume and a
variable number of secondary volumes. The purpose of the Powerstore
module is to manage the secondary volumes and to move items between
them.</p>
<p>Items can be moved according using the <a class="reference external" href="#hsm">HSM</a> (Hierarchical
Storage Management), a policy-based technique: One of the most useful is
for example to reserve the most performing storage for intensive I/O
operation and for data with frequent access, while the less performing
will manage older data.</p>
<p>The remainder of this section describes volumes and their management,
policies, HSM, and various advanced techniques.</p>
</section>
<section id="zimbra-stores">
<span id="pws-zimbra-stores"></span><h2>Zimbra Stores<a class="headerlink" href="#zimbra-stores" title="Permalink to this headline"></a></h2>
<section id="the-basics-types-of-stores-and-their-uses">
<span id="pws-the-basics-types-of-stores-and-their-uses"></span><h3>The Basics: Types of Stores and Their Uses<a class="headerlink" href="#the-basics-types-of-stores-and-their-uses" title="Permalink to this headline"></a></h3>
<p>Zimbra allows for <strong>two</strong> different types of stores:</p>
<ul class="simple">
<li><p><strong>Index Store</strong>: A store that contains information about your data
that is used by Apache Lucene to provide indexing and search
functions.</p></li>
<li><p><strong>Data Store</strong>: A store that contains all your Zimbra data organized
in a MySql database.</p></li>
</ul>
<p>You can have multiple stores of each type, but only one Index Store, one
Primary Data Store and one Secondary Data Store can be set as <em>Current</em>
(meaning that is currently used by Zimbra).</p>
<section id="primary-and-secondary-data-stores">
<span id="pws-primary-and-secondary-data-stores"></span><h4>Primary and Secondary Data Stores<a class="headerlink" href="#primary-and-secondary-data-stores" title="Permalink to this headline"></a></h4>
<p>A data store in Zimbra can be either a Primary Data Store or a Secondary
Data Store.</p>
<p>Data is moved between the <em>current</em> Primary Data Store and the <em>current</em>
Secondary Data Store according to a defined policy.</p>
</section>
</section>
<section id="zextras-powerstore-moving-items-between-stores">
<span id="pws-zextras-powerstore-moving-items-between-stores"></span><h3>Zextras Powerstore: Moving Items between Stores<a class="headerlink" href="#zextras-powerstore-moving-items-between-stores" title="Permalink to this headline"></a></h3>
<p>The main feature of the Zextras Powerstore module is the ability to
apply defined HSM policies.</p>
<p>The move can be triggered in three ways:</p>
<ul class="simple">
<li><p>Click the <em>Apply Policy</em> button in the Administration Zimlet.</p></li>
<li><p>Start the <code class="docutils literal notranslate"><span class="pre">doMoveBlobs</span></code> operation through the CLI.</p></li>
<li><p>Enable Policy Application Scheduling in the Administration Zimlet and
wait for it to start automatically.</p></li>
</ul>
<p>Once the move is started, the following operations are performed:</p>
<ul class="simple">
<li><p>Zextras Powerstore scans through the Primary Store to see which items
comply with the defined policy.</p></li>
<li><p>All the Blobs of the items found in the first step are copied to the
Secondary Store.</p></li>
<li><p>The database entries related to the copied items are updated to
reflect the move.</p></li>
<li><p>If the second and the third steps are completed successfully (and
only in this case), the old Blobs are deleted from the Primary Store.</p></li>
</ul>
<p>The Move operation is <em>stateful</em> - each step is executed only if the
previous step has been completed successfully - so the risk of data loss
during a Move operation is nonexistent.</p>
</section>
</section>
<section id="centralized-storage">
<span id="pws-centralized-storage"></span><h2>Centralized Storage<a class="headerlink" href="#centralized-storage" title="Permalink to this headline"></a></h2>
<p>The Centralized Storage feature allows to use an S3 bucket to host data
coming from multiple servers at the same time sharing the same directory
structure, as opposed to “independent” volumes which are self-contained
and whose directory structure is strictly related to the server and
volume itself.</p>
<p>This allows for better data management in large multistore environments
and greatly improves mailbox move speed.</p>
<p>Two important aspects of centralized storage that should be taken into
account before deloying are the following</p>
<ol class="arabic simple">
<li><p>Item deduplication is <strong>lost</strong></p></li>
<li><p><strong>Only S3 buckets</strong> can be used for centralized storage</p></li>
</ol>
<section id="enabling-centralized-storage">
<span id="pws-enabling-centralized-storage"></span><h3>Enabling Centralized Storage<a class="headerlink" href="#enabling-centralized-storage" title="Permalink to this headline"></a></h3>
<ol class="arabic simple">
<li><p>Create the centralized volume on any one of your servers using the
<code class="docutils literal notranslate"><span class="pre">zxsuite</span> <span class="pre">powerstore</span> <span class="pre">doCreateVolume</span></code> command.</p>
<ol class="loweralpha simple">
<li><p>All volume types except for FileBlob are compatible;</p></li>
<li><p>Make sure to add the centralized TRUE flag to set the volume as a
Centralized Storage;</p></li>
<li><p>The full syntax for the command depends on the storage type;</p></li>
</ol>
</li>
<li><p>Once the Centralized Volume has been created, use the
<code class="docutils literal notranslate"><span class="pre">zxsuite</span> <span class="pre">doCreateVolume</span> <span class="pre">Centralized</span></code> command on all other mailbox
servers to copy the Centralized Volume’s configuration from the first
server and add it to the volume list.</p>
<ol class="loweralpha simple">
<li><p>The full syntax for the command is zxsuite powerstore
doCreateVolume Centralized {server_name} {volume_name}</p></li>
</ol>
</li>
</ol>
</section>
<section id="centralized-storage-structure">
<span id="pws-centralized-storage-structure"></span><h3>Centralized Storage Structure<a class="headerlink" href="#centralized-storage-structure" title="Permalink to this headline"></a></h3>
<p>Storage Structure Data is stored in a Centralized Volume plainly, as the
main directory of the volume contains a single empty directory for each
server connected to the volume and a directory for each mailbox stored
in it at the very same level.</p>
<p>In the following example, servers 3aa2d376-1c59-4b5a-94f6-101602fa69c6
and 595a4409-6aa1-413f-9f45-3ef0f1e560f5 are both connected to the same
Centralized volume, where 3 mailboxes are stored. As you can see, the
effective server where the mailboxes are hosted is irrelevant to the
storage.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span>
<span class="o">|-</span> <span class="mi">3</span><span class="n">aa2d376</span><span class="o">-</span><span class="mi">1</span><span class="n">c59</span><span class="o">-</span><span class="mi">4</span><span class="n">b5a</span><span class="o">-</span><span class="mi">94</span><span class="n">f6</span><span class="o">-</span><span class="mi">101602</span><span class="n">fa69c6</span><span class="o">/</span>
<span class="o">|-</span> <span class="mi">595</span><span class="n">a4409</span><span class="o">-</span><span class="mi">6</span><span class="n">aa1</span><span class="o">-</span><span class="mi">413</span><span class="n">f</span><span class="o">-</span><span class="mi">9</span><span class="n">f45</span><span class="o">-</span><span class="mi">3</span><span class="n">ef0f1e560f5</span><span class="o">/</span>
<span class="o">|-</span> <span class="n">ff46e039</span><span class="o">-</span><span class="mf">28e3</span><span class="o">-</span><span class="mi">4343</span><span class="o">-</span><span class="mi">9</span><span class="n">d66</span><span class="o">-</span><span class="mi">92</span><span class="n">adc60e60c9</span><span class="o">/</span>
\
 <span class="o">|--</span> <span class="mi">357</span><span class="o">-</span><span class="mf">104.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">368</span><span class="o">-</span><span class="mf">115.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">369</span><span class="o">-</span><span class="mf">116.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">373</span><span class="o">-</span><span class="mf">120.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">374</span><span class="o">-</span><span class="mf">121.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">375</span><span class="o">-</span><span class="mf">122.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">376</span><span class="o">-</span><span class="mf">123.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">383</span><span class="o">-</span><span class="mf">130.</span><span class="n">msg</span>
<span class="o">|-</span> <span class="mi">4</span><span class="n">c022592</span><span class="o">-</span><span class="n">f67d</span><span class="o">-</span><span class="mi">439</span><span class="n">c</span><span class="o">-</span><span class="mi">9</span><span class="n">ff9</span><span class="o">-</span><span class="n">e3d48a8c801b</span><span class="o">/</span>
\
 <span class="o">|--</span> <span class="mi">315</span><span class="o">-</span><span class="mf">63.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">339</span><span class="o">-</span><span class="mf">87.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">857</span><span class="o">-</span><span class="mf">607.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">858</span><span class="o">-</span><span class="mf">608.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">859</span><span class="o">-</span><span class="mf">609.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">861</span><span class="o">-</span><span class="mf">611.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">862</span><span class="o">-</span><span class="mf">612.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">863</span><span class="o">-</span><span class="mf">613.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">864</span><span class="o">-</span><span class="mf">614.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">865</span><span class="o">-</span><span class="mf">615.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">866</span><span class="o">-</span><span class="mf">616.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">867</span><span class="o">-</span><span class="mf">617.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">868</span><span class="o">-</span><span class="mf">618.</span><span class="n">msg</span>
<span class="o">|-</span> <span class="n">dafd5569</span><span class="o">-</span><span class="mi">4114</span><span class="o">-</span><span class="mi">4268</span><span class="o">-</span><span class="mi">9201</span><span class="o">-</span><span class="mi">14</span><span class="n">f4a895a3d5</span><span class="o">/</span>
\
 <span class="o">|--</span> <span class="mi">357</span><span class="o">-</span><span class="mf">104.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">368</span><span class="o">-</span><span class="mf">115.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">369</span><span class="o">-</span><span class="mf">116.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">373</span><span class="o">-</span><span class="mf">120.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">374</span><span class="o">-</span><span class="mf">121.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">375</span><span class="o">-</span><span class="mf">122.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">376</span><span class="o">-</span><span class="mf">123.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">383</span><span class="o">-</span><span class="mf">130.</span><span class="n">msg</span>
 <span class="o">|--</span> <span class="mi">384</span><span class="o">-</span><span class="mf">131.</span><span class="n">msg</span>
</pre></div>
</div>
</section>
</section>
<section id="volume-management">
<span id="pws-volume-management"></span><h2>Volume Management<a class="headerlink" href="#volume-management" title="Permalink to this headline"></a></h2>
<p>Both primary and secondary volumes can be created on either local
storage or on supported third-party storage solutions.</p>
<section id="zimbra-volumes">
<span id="pws-zimbra-volumes"></span><h3>Zimbra Volumes<a class="headerlink" href="#zimbra-volumes" title="Permalink to this headline"></a></h3>
<p>A volume is a distinct entity (path) on a filesystem with all the
associated properties that contain Zimbra Blobs.</p>
<section id="volume-properties">
<span id="pws-volume-properties"></span><h4>Volume Properties<a class="headerlink" href="#volume-properties" title="Permalink to this headline"></a></h4>
<p>All Zimbra volumes are defined by the following properties:</p>
<ul>
<li><p>Name: A unique identifier for the volume.</p></li>
<li><p>Path: The path where the data is going to be saved.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The <em>zimbra</em> user must have r/w permissions on this
path.</p>
</div>
</li>
<li><p>Compression: Enable or Disable the file compression for the volume.</p></li>
<li><p>Compression Threshold: The minimum file size that will trigger the
compression. ‘Files under this size will never be compressed even if
the compression is enabled.’</p></li>
<li><p>Current: A <em>Current</em> volume is a volume where data will be written
upon arrival (Primary Current) or HSM policy application (Secondary
Current).</p></li>
</ul>
</section>
<section id="local-volumes">
<span id="pws-local-volumes"></span><h4>Local Volumes<a class="headerlink" href="#local-volumes" title="Permalink to this headline"></a></h4>
<p>Local Volumes (i.e. FileBlob type) can be hosted on any mountpoint on
the system regardless of the mountpoint’s destination and are defined by
the following properties:</p>
<ul>
<li><p><strong>Name:</strong> A unique identifier for the volume.</p></li>
<li><p><strong>Path:</strong> The path where the data is going to be saved. The <em>zimbra</em>
user must have r/w permissions on this path.</p></li>
<li><p><strong>Compression:</strong> Enable or Disable file compression for the volume.</p></li>
<li><p><strong>Compression Threshold:</strong> the minimum file size that will trigger
the compression.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Files under this size will never be compressed even
if compression is enabled.</p>
</div>
</li>
</ul>
</section>
<section id="current-volumes">
<span id="pws-current-volumes"></span><h4>Current Volumes<a class="headerlink" href="#current-volumes" title="Permalink to this headline"></a></h4>
<p>A <em>Current Volume</em> is a volume where data will be written upon arrival
(Primary Current) or HSM Policy Application (Secondary Current). Volumes
not set as Current won’t be written upon except by specific manual
operations such as the Volume-to-Volume move.</p>
</section>
<section id="volume-management-with-zextras-powerstore-administration-zimlet">
<span id="pws-volume-management-with-zextras-powerstore-administration-zimlet"></span><h4>Volume Management with Zextras Powerstore - Administration Zimlet<a class="headerlink" href="#volume-management-with-zextras-powerstore-administration-zimlet" title="Permalink to this headline"></a></h4>
<section id="creating-a-new-volume-with-the-administration-zimlet">
<span id="pws-creating-a-new-volume-with-the-administration-zimlet"></span><h5>Creating a New Volume with the Administration Zimlet<a class="headerlink" href="#creating-a-new-volume-with-the-administration-zimlet" title="Permalink to this headline"></a></h5>
<p>To create a new volume from the Zextras Powerstore tab of the
Administration Zimlet:</p>
<ul class="simple">
<li><p>Click the appropriate <em>Add</em> option in the <em>Volumes Management</em>
section according to the type of volume you want to create.</p></li>
<li><p>Select the store type, choosing between local mount point or S3
Bucket.</p></li>
<li><p>Enter the new volume’s name.</p></li>
<li><p>Enter a path for the new volume.</p></li>
<li><p>Check the <em>Enable Compression</em> button if you wish to activate data
compression on the new volume.</p></li>
<li><p>Select the Compression Threshold.</p></li>
<li><p>If you are using an S3 Bucket, it’s possible to store information for
multiple buckets.</p></li>
<li><p>Press <em>OK</em> to create the new volume. Should the operation fail, a
notification containing any related errors will be generated.</p></li>
</ul>
</section>
<section id="editing-a-volume-with-the-administration-zimlet">
<span id="pws-editing-a-volume-with-the-administration-zimlet"></span><h5>Editing a Volume with the Administration Zimlet<a class="headerlink" href="#editing-a-volume-with-the-administration-zimlet" title="Permalink to this headline"></a></h5>
<p>To edit a volume from the Administration Zimlet, simply select an
existing volume and press the appropriate <em>Edit</em> button.</p>
</section>
<section id="deleting-a-volume-with-the-administration-zimlet">
<span id="pws-deleting-a-volume"></span><h5>Deleting a Volume with the Administration Zimlet<a class="headerlink" href="#deleting-a-volume-with-the-administration-zimlet" title="Permalink to this headline"></a></h5>
<p>To delete a volume from the Administration Zimlet, select an existing
volume and press the appropriate <em>Delete</em> button. Remember that only
<strong>empty</strong> volumes can be deleted.</p>
</section>
</section>
<section id="volume-management-with-zextras-powerstore-from-the-cli">
<span id="pws-volume-management-with-zextras-powerstore-from-the-cli"></span><h4>Volume Management with Zextras Powerstore - From the CLI<a class="headerlink" href="#volume-management-with-zextras-powerstore-from-the-cli" title="Permalink to this headline"></a></h4>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Beginning with release 8.8.9, all volume creation and
update commands have been updated, as the <code class="docutils literal notranslate"><span class="pre">storeType</span></code> argument is
now required.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">storeType</span></code> argument is <strong>mandatory</strong>, it is always the on the
first position and accepts any one value corresponding to the
<a class="reference external" href="#S3-compatible-services">S3-Compatible Services</a> listed previously.
The arguments that follow in the command now depend on the selected
<code class="docutils literal notranslate"><span class="pre">storeType</span></code>.</p>
<section id="fileblob-local">
<span id="pws-fileblob-local"></span><h5>FileBlob (Local)<a class="headerlink" href="#fileblob-local" title="Permalink to this headline"></a></h5>
<p>Updated <code class="docutils literal notranslate"><span class="pre">zxsuite</span></code> syntax to create new FileBlob zimbra volume:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add volume, run as zimbra user</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">FileBlob</span> <span class="n">name</span> <span class="n">secondary</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">store</span>
<span class="c1"># Delete volume</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doDeleteVolume</span> <span class="n">name</span>
<span class="c1"># set current</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doUpdateVolume</span> <span class="n">FileBlob</span> <span class="n">name</span> <span class="n">current_volume</span> <span class="n">true</span>
</pre></div>
</div>
<p>zxsuite powerstore doCreateVolume FileBlob</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Syntax</span><span class="p">:</span>
    <span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">FileBlob</span> <span class="p">{</span><span class="n">volume_name</span><span class="p">}</span> <span class="p">{</span><span class="n">primary</span><span class="o">|</span><span class="n">secondary</span><span class="o">|</span><span class="n">index</span><span class="p">}</span> <span class="p">{</span><span class="n">volume_path</span><span class="p">}</span> <span class="p">[</span><span class="n">attr1</span> <span class="n">value1</span> <span class="p">[</span><span class="n">attr2</span> <span class="n">value2</span><span class="o">...</span><span class="p">]]</span>

<span class="n">PARAMETER</span> <span class="n">LIST</span>

<span class="n">NAME</span>                            <span class="n">TYPE</span>                <span class="n">EXPECTED</span> <span class="n">VALUES</span>             <span class="n">DEFAULT</span>
<span class="n">volume_name</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>                  <span class="n">String</span>
<span class="n">volume_type</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>                  <span class="n">Multiple</span> <span class="n">choice</span>     <span class="n">primary</span><span class="o">|</span><span class="n">secondary</span><span class="o">|</span><span class="n">index</span>
<span class="n">volume_path</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>                  <span class="n">Path</span>
<span class="n">volume_compressed</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>            <span class="n">Boolean</span>             <span class="n">true</span><span class="o">|</span><span class="n">false</span>                  <span class="n">false</span>
<span class="n">compression_threshold_bytes</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>  <span class="n">Long</span>                                            <span class="mi">4096</span>

<span class="p">(</span><span class="n">M</span><span class="p">)</span> <span class="o">==</span> <span class="n">mandatory</span> <span class="n">parameter</span><span class="p">,</span> <span class="p">(</span><span class="n">O</span><span class="p">)</span> <span class="o">==</span> <span class="n">optional</span> <span class="n">parameter</span>

<span class="n">Usage</span> <span class="n">example</span><span class="p">:</span>

<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">FileBlob</span> <span class="n">volumeName</span> <span class="n">secondary</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">store</span> <span class="n">volume_compressed</span> <span class="n">true</span> <span class="n">compression_threshold_bytes</span> <span class="mi">4096</span>
</pre></div>
</div>
<p>zxsuite powerstore doUpdateVolume FileBlob</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Syntax</span><span class="p">:</span>
    <span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doUpdateVolume</span> <span class="n">FileBlob</span> <span class="p">{</span><span class="n">current_volume_name</span><span class="p">}</span> <span class="p">[</span><span class="n">attr1</span> <span class="n">value1</span> <span class="p">[</span><span class="n">attr2</span> <span class="n">value2</span><span class="o">...</span><span class="p">]]</span>

<span class="n">PARAMETER</span> <span class="n">LIST</span>

<span class="n">NAME</span>                            <span class="n">TYPE</span>                <span class="n">EXPECTED</span> <span class="n">VALUES</span>             <span class="n">DEFAULT</span>
<span class="n">current_volume_name</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>          <span class="n">String</span>
<span class="n">volume_type</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                  <span class="n">String</span>              <span class="n">primary</span><span class="o">|</span><span class="n">secondary</span><span class="o">|</span><span class="n">index</span>
<span class="n">volume_name</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                  <span class="n">String</span>
<span class="n">volume_path</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                  <span class="n">Path</span>
<span class="n">current_volume</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>               <span class="n">Boolean</span>             <span class="n">true</span><span class="o">|</span><span class="n">false</span>                  <span class="n">false</span>
<span class="n">volume_compressed</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>            <span class="n">String</span>
<span class="n">compression_threshold</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>        <span class="n">String</span>

<span class="p">(</span><span class="n">M</span><span class="p">)</span> <span class="o">==</span> <span class="n">mandatory</span> <span class="n">parameter</span><span class="p">,</span> <span class="p">(</span><span class="n">O</span><span class="p">)</span> <span class="o">==</span> <span class="n">optional</span> <span class="n">parameter</span>
</pre></div>
</div>
</section>
<section id="s3-amazon-and-any-s3-compatible-solution-not-explicitly-supported">
<span id="pws-s3-buckets"></span><h5>S3 (Amazon and any S3-compatible solution not explicitly supported)<a class="headerlink" href="#s3-amazon-and-any-s3-compatible-solution-not-explicitly-supported" title="Permalink to this headline"></a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add volume, run as zimbra user</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">S3</span> <span class="n">name</span> <span class="n">secondary</span> <span class="n">bucket_name</span> <span class="n">bucket</span> <span class="n">access_key</span> <span class="n">accessKey</span> <span class="n">secret</span> <span class="n">secretString</span> <span class="n">region</span> <span class="n">EU_WEST_1</span>
<span class="c1"># Delete volume</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doDeleteVolume</span> <span class="n">name</span>
<span class="c1"># set current</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doUpdateVolume</span> <span class="n">S3</span> <span class="n">name</span> <span class="n">current_volume</span> <span class="n">true</span>
</pre></div>
</div>
<p>zxsuite powerstore doCreateVolume S3</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Syntax</span><span class="p">:</span>
    <span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">S3</span> <span class="p">{</span><span class="n">Name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">zimbra</span> <span class="n">store</span><span class="p">}</span> <span class="p">{</span><span class="n">primary</span><span class="o">|</span><span class="n">secondary</span><span class="p">}</span> <span class="p">[</span><span class="n">attr1</span> <span class="n">value1</span> <span class="p">[</span><span class="n">attr2</span> <span class="n">value2</span><span class="o">...</span><span class="p">]]</span>

<span class="n">PARAMETER</span> <span class="n">LIST</span>

<span class="n">NAME</span>                            <span class="n">TYPE</span>                <span class="n">EXPECTED</span> <span class="n">VALUES</span>
<span class="n">volume_name</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>                  <span class="n">String</span>              <span class="n">Name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">zimbra</span> <span class="n">store</span>
<span class="n">volume_type</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>                  <span class="n">Multiple</span> <span class="n">choice</span>     <span class="n">primary</span><span class="o">|</span><span class="n">secondary</span>
<span class="n">bucket_name</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                  <span class="n">String</span>              <span class="n">Amazon</span> <span class="n">AWS</span> <span class="n">bucket</span>
<span class="n">access_key</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                   <span class="n">String</span>              <span class="n">Service</span> <span class="n">username</span>
<span class="n">secret</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                       <span class="n">String</span>              <span class="n">Service</span> <span class="n">password</span>
<span class="n">server_prefix</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                <span class="n">String</span>              <span class="n">Prefix</span> <span class="n">to</span> <span class="n">the</span> <span class="n">server</span> <span class="nb">id</span> <span class="n">used</span> <span class="ow">in</span> <span class="nb">all</span> <span class="n">objects</span> <span class="n">keys</span>
<span class="n">bucket_configuration_id</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>      <span class="n">String</span>              <span class="n">UUID</span> <span class="k">for</span> <span class="n">already</span> <span class="n">existing</span> <span class="n">S3</span> <span class="n">service</span> <span class="n">credentials</span>
                                                    <span class="p">(</span><span class="n">zxsuite</span> <span class="n">config</span> <span class="k">global</span> <span class="n">get</span> <span class="n">attribute</span> <span class="n">s3BucketConfigurations</span><span class="p">)</span>
<span class="n">region</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                       <span class="n">String</span>              <span class="n">Amazon</span> <span class="n">AWS</span> <span class="n">Region</span>
<span class="n">url</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                          <span class="n">String</span>              <span class="n">S3</span> <span class="n">API</span> <span class="n">compatible</span> <span class="n">service</span> <span class="n">url</span> <span class="p">(</span><span class="n">ex</span><span class="p">:</span> <span class="n">s3api</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">com</span><span class="p">)</span>
<span class="n">prefix</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                       <span class="n">String</span>              <span class="n">Prefix</span> <span class="n">added</span> <span class="n">to</span> <span class="n">blobs</span> <span class="n">keys</span>
<span class="n">use_infrequent_access</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>        <span class="n">Boolean</span>             <span class="n">true</span><span class="o">|</span><span class="n">false</span>
<span class="n">infrequent_access_threshold</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>  <span class="n">String</span>

<span class="p">(</span><span class="n">M</span><span class="p">)</span> <span class="o">==</span> <span class="n">mandatory</span> <span class="n">parameter</span><span class="p">,</span> <span class="p">(</span><span class="n">O</span><span class="p">)</span> <span class="o">==</span> <span class="n">optional</span> <span class="n">parameter</span>

<span class="n">Usage</span> <span class="n">example</span><span class="p">:</span>

<span class="n">S3</span> <span class="n">AWS</span> <span class="n">Bucket</span><span class="p">:</span>
    <span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">S3</span> <span class="n">volumeName</span> <span class="n">primary</span> <span class="n">bucket_name</span> <span class="n">bucket</span> <span class="n">access_key</span> <span class="n">accessKey</span> <span class="n">secret</span> <span class="n">secretKey</span> <span class="n">prefix</span> <span class="n">objectKeysPrefix</span> <span class="n">region</span> <span class="n">EU_WEST_1</span> <span class="n">user_infrequent_access</span> <span class="n">TRUE</span> <span class="n">infrequent_access_threshold</span> <span class="mi">4096</span>

<span class="n">S3</span> <span class="n">compatible</span> <span class="nb">object</span> <span class="n">storage</span><span class="p">:</span>
    <span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">S3</span> <span class="n">volumeName</span> <span class="n">primary</span> <span class="n">bucket_name</span> <span class="n">bucket</span> <span class="n">access_key</span> <span class="n">accessKey</span> <span class="n">secret</span> <span class="n">secretKey</span> <span class="n">url</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">host</span><span class="o">/</span><span class="n">service</span>

<span class="n">Using</span> <span class="n">existing</span> <span class="n">bucket</span> <span class="n">configuration</span><span class="p">:</span>
    <span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">S3</span> <span class="n">volumeName</span> <span class="n">primary</span> <span class="n">bucket_configuration_id</span> <span class="mi">316813</span><span class="n">fb</span><span class="o">-</span><span class="n">d3ef</span><span class="o">-</span><span class="mi">4775</span><span class="o">-</span><span class="n">b5c8</span><span class="o">-</span><span class="n">f7d236fc629c</span>
</pre></div>
</div>
<p>zxsuite powerstore doUpdateVolume S3</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Syntax</span><span class="p">:</span>
    <span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doUpdateVolume</span> <span class="n">S3</span> <span class="p">{</span><span class="n">current_volume_name</span><span class="p">}</span> <span class="p">[</span><span class="n">attr1</span> <span class="n">value1</span> <span class="p">[</span><span class="n">attr2</span> <span class="n">value2</span><span class="o">...</span><span class="p">]]</span>

<span class="n">PARAMETER</span> <span class="n">LIST</span>

<span class="n">NAME</span>                            <span class="n">TYPE</span>                <span class="n">EXPECTED</span> <span class="n">VALUES</span>             <span class="n">DEFAULT</span>
<span class="n">current_volume_name</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>          <span class="n">String</span>
<span class="n">volume_name</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                  <span class="n">String</span>
<span class="n">volume_type</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                  <span class="n">String</span>              <span class="n">primary</span><span class="o">|</span><span class="n">secondary</span>
<span class="n">server_prefix</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                <span class="n">String</span>              <span class="n">Prefix</span> <span class="n">to</span> <span class="n">the</span> <span class="n">server</span> <span class="nb">id</span> <span class="n">used</span> <span class="ow">in</span> <span class="nb">all</span> <span class="n">objects</span> <span class="n">keys</span>
<span class="n">bucket_configuration_id</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>      <span class="n">String</span>              <span class="n">UUID</span> <span class="k">for</span> <span class="n">already</span> <span class="n">existing</span> <span class="n">service</span> <span class="n">credentials</span>
                                                    <span class="p">(</span><span class="n">zxsuite</span> <span class="n">config</span> <span class="k">global</span> <span class="n">get</span> <span class="n">attribute</span> <span class="n">s3BucketConfigurations</span><span class="p">)</span>
<span class="n">use_infrequent_access</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>        <span class="n">Boolean</span>             <span class="n">true</span><span class="o">|</span><span class="n">false</span>
<span class="n">infrequent_access_threshold</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>  <span class="n">String</span>
<span class="n">current_volume</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>               <span class="n">Boolean</span>             <span class="n">true</span><span class="o">|</span><span class="n">false</span>                  <span class="n">false</span>

<span class="p">(</span><span class="n">M</span><span class="p">)</span> <span class="o">==</span> <span class="n">mandatory</span> <span class="n">parameter</span><span class="p">,</span> <span class="p">(</span><span class="n">O</span><span class="p">)</span> <span class="o">==</span> <span class="n">optional</span> <span class="n">parameter</span>
</pre></div>
</div>
</section>
<section id="scality-s3-compatible-object-storage">
<span id="pws-scality-s3-compatible-object-storage"></span><h5>Scality (S3 compatible object storage)<a class="headerlink" href="#scality-s3-compatible-object-storage" title="Permalink to this headline"></a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add volume, run as zimbra user</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">ScalityS3</span> <span class="n">name</span> <span class="n">secondary</span> <span class="n">bucket_name</span> <span class="n">mybucket</span> <span class="n">access_key</span> <span class="n">accessKey1</span> <span class="n">secret</span> <span class="n">verySecretKey1</span> <span class="n">url</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="p">{</span><span class="n">IP_ADDRESS</span><span class="p">}:{</span><span class="n">PORT</span><span class="p">}</span>
<span class="c1"># Delete volume</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doDeleteVolume</span> <span class="n">name</span>
<span class="c1"># set current</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doUpdateVolume</span> <span class="n">ScalityS3</span> <span class="n">name</span> <span class="n">current_volume</span> <span class="n">true</span>
</pre></div>
</div>
<p>zxsuite powerstore doCreateVolume ScalityS3</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Syntax</span><span class="p">:</span>
    <span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">ScalityS3</span> <span class="p">{</span><span class="n">volume_name</span><span class="p">}</span> <span class="p">{</span><span class="n">primary</span><span class="o">|</span><span class="n">secondary</span><span class="p">}</span> <span class="p">[</span><span class="n">attr1</span> <span class="n">value1</span> <span class="p">[</span><span class="n">attr2</span> <span class="n">value2</span><span class="o">...</span><span class="p">]]</span>

<span class="n">PARAMETER</span> <span class="n">LIST</span>

<span class="n">NAME</span>                            <span class="n">TYPE</span>                <span class="n">EXPECTED</span> <span class="n">VALUES</span>
<span class="n">volume_name</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>                  <span class="n">String</span>
<span class="n">volume_type</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>                  <span class="n">Multiple</span> <span class="n">choice</span>     <span class="n">primary</span><span class="o">|</span><span class="n">secondary</span>
<span class="n">bucket_name</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                  <span class="n">String</span>              <span class="n">Bucket</span> <span class="n">name</span>
<span class="n">url</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                          <span class="n">String</span>              <span class="n">S3</span> <span class="n">API</span> <span class="n">compatible</span> <span class="n">service</span> <span class="n">url</span> <span class="p">(</span><span class="n">ex</span><span class="p">:</span> <span class="n">s3api</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">com</span><span class="p">)</span>
<span class="n">access_key</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                   <span class="n">String</span>              <span class="n">Service</span> <span class="n">username</span>
<span class="n">secret</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                       <span class="n">String</span>              <span class="n">Service</span> <span class="n">password</span>
<span class="n">server_prefix</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                <span class="n">String</span>              <span class="n">Prefix</span> <span class="n">to</span> <span class="n">the</span> <span class="n">server</span> <span class="nb">id</span> <span class="n">used</span> <span class="ow">in</span> <span class="nb">all</span> <span class="n">objects</span> <span class="n">keys</span>
<span class="n">bucket_configuration_id</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>      <span class="n">String</span>              <span class="n">UUID</span> <span class="k">for</span> <span class="n">already</span> <span class="n">existing</span> <span class="n">service</span> <span class="n">credentials</span>
                                                    <span class="p">(</span><span class="n">zxsuite</span> <span class="n">config</span> <span class="k">global</span> <span class="n">get</span> <span class="n">attribute</span> <span class="n">s3BucketConfigurations</span><span class="p">)</span>
<span class="n">prefix</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                       <span class="n">String</span>              <span class="n">Prefix</span> <span class="n">added</span> <span class="n">to</span> <span class="n">blobs</span> <span class="n">keys</span>

<span class="p">(</span><span class="n">M</span><span class="p">)</span> <span class="o">==</span> <span class="n">mandatory</span> <span class="n">parameter</span><span class="p">,</span> <span class="p">(</span><span class="n">O</span><span class="p">)</span> <span class="o">==</span> <span class="n">optional</span> <span class="n">parameter</span>

<span class="n">Usage</span> <span class="n">example</span><span class="p">:</span>

<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">ScalityS3</span> <span class="n">volumeName</span> <span class="n">primary</span> <span class="n">bucket_name</span> <span class="n">bucket</span> <span class="n">url</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">host</span><span class="o">/</span><span class="n">service</span> <span class="n">access_key</span> <span class="n">accessKey</span> <span class="n">secret</span> <span class="n">secretKet</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">ScalityS3</span> <span class="n">volumeName</span> <span class="n">primary</span> <span class="n">bucket_configuration_id</span> <span class="n">uuid</span>
</pre></div>
</div>
<p>zxsuite powerstore doUpdateVolume ScalityS3</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Syntax</span><span class="p">:</span>
    <span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doUpdateVolume</span> <span class="n">ScalityS3</span> <span class="p">{</span><span class="n">current_volume_name</span><span class="p">}</span> <span class="p">[</span><span class="n">attr1</span> <span class="n">value1</span> <span class="p">[</span><span class="n">attr2</span> <span class="n">value2</span><span class="o">...</span><span class="p">]]</span>

<span class="n">PARAMETER</span> <span class="n">LIST</span>

<span class="n">NAME</span>                            <span class="n">TYPE</span>                <span class="n">EXPECTED</span> <span class="n">VALUES</span>             <span class="n">DEFAULT</span>
<span class="n">current_volume_name</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>          <span class="n">String</span>
<span class="n">volume_name</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                  <span class="n">String</span>
<span class="n">volume_type</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                  <span class="n">String</span>              <span class="n">primary</span><span class="o">|</span><span class="n">secondary</span>
<span class="n">server_prefix</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                <span class="n">String</span>              <span class="n">Prefix</span> <span class="n">to</span> <span class="n">the</span> <span class="n">server</span> <span class="nb">id</span> <span class="n">used</span> <span class="ow">in</span> <span class="nb">all</span> <span class="n">objects</span> <span class="n">keys</span>
<span class="n">bucket_configuration_id</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>      <span class="n">String</span>              <span class="n">UUID</span> <span class="k">for</span> <span class="n">already</span> <span class="n">existing</span> <span class="n">S3</span> <span class="n">service</span> <span class="n">credentials</span>
                                                    <span class="p">(</span><span class="n">zxsuite</span> <span class="n">config</span> <span class="k">global</span> <span class="n">get</span> <span class="n">attribute</span> <span class="n">s3BucketConfigurations</span><span class="p">)</span>
<span class="n">current_volume</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>               <span class="n">Boolean</span>             <span class="n">true</span><span class="o">|</span><span class="n">false</span>                  <span class="n">false</span>

<span class="p">(</span><span class="n">M</span><span class="p">)</span> <span class="o">==</span> <span class="n">mandatory</span> <span class="n">parameter</span><span class="p">,</span> <span class="p">(</span><span class="n">O</span><span class="p">)</span> <span class="o">==</span> <span class="n">optional</span> <span class="n">parameter</span>
</pre></div>
</div>
</section>
<section id="emc-s3-compatible-object-storage">
<span id="pws-emc-s3-compatible-object-storage"></span><h5>EMC (S3 compatible object storage)<a class="headerlink" href="#emc-s3-compatible-object-storage" title="Permalink to this headline"></a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add volume, run as zimbra user</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">docreatevolume</span> <span class="n">EMC</span> <span class="n">name</span> <span class="n">secondary</span> <span class="n">bucket_name</span> <span class="n">bucket</span> <span class="n">access_key</span> <span class="n">ACCESSKEY</span> <span class="n">secret</span> <span class="n">SECRET</span> <span class="n">url</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">url</span><span class="o">.</span><span class="n">of</span><span class="o">.</span><span class="n">storage</span>
<span class="c1"># Delete volume</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doDeleteVolume</span> <span class="n">name</span>
<span class="c1"># set current</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doUpdateVolume</span> <span class="n">EMC</span> <span class="n">name</span> <span class="n">current_volume</span> <span class="n">true</span>
</pre></div>
</div>
<p>zxsuite powerstore doCreateVolume EMC</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Syntax</span><span class="p">:</span>
    <span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">EMC</span> <span class="p">{</span><span class="n">volume_name</span><span class="p">}</span> <span class="p">{</span><span class="n">primary</span><span class="o">|</span><span class="n">secondary</span><span class="p">}</span> <span class="p">[</span><span class="n">attr1</span> <span class="n">value1</span> <span class="p">[</span><span class="n">attr2</span> <span class="n">value2</span><span class="o">...</span><span class="p">]]</span>

<span class="n">PARAMETER</span> <span class="n">LIST</span>

<span class="n">NAME</span>                            <span class="n">TYPE</span>                <span class="n">EXPECTED</span> <span class="n">VALUES</span>
<span class="n">volume_name</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>                  <span class="n">String</span>
<span class="n">volume_type</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>                  <span class="n">Multiple</span> <span class="n">choice</span>     <span class="n">primary</span><span class="o">|</span><span class="n">secondary</span>
<span class="n">bucket_name</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                  <span class="n">String</span>              <span class="n">Bucket</span> <span class="n">name</span>
<span class="n">url</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                          <span class="n">String</span>              <span class="n">S3</span> <span class="n">API</span> <span class="n">compatible</span> <span class="n">service</span> <span class="n">url</span> <span class="p">(</span><span class="n">ex</span><span class="p">:</span> <span class="n">s3api</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">com</span><span class="p">)</span>
<span class="n">access_key</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                   <span class="n">String</span>              <span class="n">Service</span> <span class="n">username</span>
<span class="n">secret</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                       <span class="n">String</span>              <span class="n">Service</span> <span class="n">password</span>
<span class="n">server_prefix</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                <span class="n">String</span>              <span class="n">Prefix</span> <span class="n">to</span> <span class="n">the</span> <span class="n">server</span> <span class="nb">id</span> <span class="n">used</span> <span class="ow">in</span> <span class="nb">all</span> <span class="n">objects</span> <span class="n">keys</span>
<span class="n">bucket_configuration_id</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>      <span class="n">String</span>              <span class="n">UUID</span> <span class="k">for</span> <span class="n">already</span> <span class="n">existing</span> <span class="n">service</span> <span class="n">credentials</span>
                                                    <span class="p">(</span><span class="n">zxsuite</span> <span class="n">config</span> <span class="k">global</span> <span class="n">get</span> <span class="n">attribute</span> <span class="n">s3BucketConfigurations</span><span class="p">)</span>
<span class="n">prefix</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                       <span class="n">String</span>              <span class="n">Prefix</span> <span class="n">added</span> <span class="n">to</span> <span class="n">blobs</span> <span class="n">keys</span>

<span class="p">(</span><span class="n">M</span><span class="p">)</span> <span class="o">==</span> <span class="n">mandatory</span> <span class="n">parameter</span><span class="p">,</span> <span class="p">(</span><span class="n">O</span><span class="p">)</span> <span class="o">==</span> <span class="n">optional</span> <span class="n">parameter</span>

<span class="n">Usage</span> <span class="n">example</span><span class="p">:</span>

<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">EMC</span> <span class="n">volumeName</span> <span class="n">primary</span> <span class="n">bucket_name</span> <span class="n">bucket</span> <span class="n">url</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">host</span><span class="o">/</span><span class="n">service</span> <span class="n">access_key</span> <span class="n">accessKey</span> <span class="n">secret</span> <span class="n">secretKet</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">EMC</span> <span class="n">volumeName</span> <span class="n">primary</span> <span class="n">bucket_configuration_id</span> <span class="n">uuid</span>
</pre></div>
</div>
<p>zxsuite powerstore doUpdateVolume EMC</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Syntax</span><span class="p">:</span>
    <span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doUpdateVolume</span> <span class="n">EMC</span> <span class="p">{</span><span class="n">current_volume_name</span><span class="p">}</span> <span class="p">[</span><span class="n">attr1</span> <span class="n">value1</span> <span class="p">[</span><span class="n">attr2</span> <span class="n">value2</span><span class="o">...</span><span class="p">]]</span>

<span class="n">PARAMETER</span> <span class="n">LIST</span>

<span class="n">NAME</span>                            <span class="n">TYPE</span>                <span class="n">EXPECTED</span> <span class="n">VALUES</span>             <span class="n">DEFAULT</span>
<span class="n">current_volume_name</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>          <span class="n">String</span>
<span class="n">volume_name</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                  <span class="n">String</span>
<span class="n">volume_type</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                  <span class="n">String</span>              <span class="n">primary</span><span class="o">|</span><span class="n">secondary</span>
<span class="n">server_prefix</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                <span class="n">String</span>              <span class="n">Prefix</span> <span class="n">to</span> <span class="n">the</span> <span class="n">server</span> <span class="nb">id</span> <span class="n">used</span> <span class="ow">in</span> <span class="nb">all</span> <span class="n">objects</span> <span class="n">keys</span>
<span class="n">bucket_configuration_id</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>      <span class="n">String</span>              <span class="n">UUID</span> <span class="k">for</span> <span class="n">already</span> <span class="n">existing</span> <span class="n">service</span> <span class="n">credentials</span>
                                                    <span class="p">(</span><span class="n">zxsuite</span> <span class="n">config</span> <span class="k">global</span> <span class="n">get</span> <span class="n">attribute</span> <span class="n">s3BucketConfigurations</span><span class="p">)</span>
<span class="n">current_volume</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>               <span class="n">Boolean</span>             <span class="n">true</span><span class="o">|</span><span class="n">false</span>                  <span class="n">false</span>

<span class="p">(</span><span class="n">M</span><span class="p">)</span> <span class="o">==</span> <span class="n">mandatory</span> <span class="n">parameter</span><span class="p">,</span> <span class="p">(</span><span class="n">O</span><span class="p">)</span> <span class="o">==</span> <span class="n">optional</span> <span class="n">parameter</span>
</pre></div>
</div>
</section>
<section id="openio">
<span id="pws-openio"></span><h5>OpenIO<a class="headerlink" href="#openio" title="Permalink to this headline"></a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># add volume, run as zimbra user</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">OpenIO</span> <span class="n">name</span> <span class="n">secondary</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="p">{</span><span class="n">IP_ADDRESS</span><span class="p">}</span> <span class="n">Zextras</span> <span class="n">OPENIO</span>
<span class="c1"># Delete volume</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doDeleteVolume</span> <span class="n">name</span>
<span class="c1"># set current</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doUpdateVolume</span> <span class="n">OpenIO</span> <span class="n">name</span> <span class="n">current_volume</span> <span class="n">true</span>
</pre></div>
</div>
<p>zxsuite powerstore doCreateVolume OpenIO</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Syntax</span><span class="p">:</span>
    <span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">OpenIO</span> <span class="p">{</span><span class="n">volume_name</span><span class="p">}</span> <span class="p">{</span><span class="n">primary</span><span class="o">|</span><span class="n">secondary</span><span class="p">}</span> <span class="p">{</span><span class="n">url</span><span class="p">}</span> <span class="p">{</span><span class="n">account</span><span class="p">}</span> <span class="p">{</span><span class="n">namespace</span><span class="p">}</span> <span class="p">[</span><span class="n">attr1</span> <span class="n">value1</span> <span class="p">[</span><span class="n">attr2</span> <span class="n">value2</span><span class="o">...</span><span class="p">]]</span>

<span class="n">PARAMETER</span> <span class="n">LIST</span>

<span class="n">NAME</span>                            <span class="n">TYPE</span>                <span class="n">EXPECTED</span> <span class="n">VALUES</span>
<span class="n">volume_name</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>                  <span class="n">String</span>
<span class="n">volume_type</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>                  <span class="n">Multiple</span> <span class="n">choice</span>     <span class="n">primary</span><span class="o">|</span><span class="n">secondary</span>
<span class="n">url</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>                          <span class="n">String</span>
<span class="n">account</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>                      <span class="n">String</span>
<span class="n">namespace</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>                    <span class="n">String</span>
<span class="n">proxy_port</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                   <span class="n">Integer</span>
<span class="n">account_port</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                 <span class="n">Integer</span>

<span class="p">(</span><span class="n">M</span><span class="p">)</span> <span class="o">==</span> <span class="n">mandatory</span> <span class="n">parameter</span><span class="p">,</span> <span class="p">(</span><span class="n">O</span><span class="p">)</span> <span class="o">==</span> <span class="n">optional</span> <span class="n">parameter</span>

<span class="n">Usage</span> <span class="n">example</span><span class="p">:</span>

<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">OpenIO</span> <span class="n">volumeName</span> <span class="n">primary</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">host</span><span class="o">/</span><span class="n">service</span>
</pre></div>
</div>
<p>accountName namespaceString proxy_port 6006 account_port 6009</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Syntax</span><span class="p">:</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doUpdateVolume</span> <span class="n">OpenIO</span> <span class="p">{</span><span class="n">current_volume_name</span><span class="p">}</span> <span class="p">[</span><span class="n">attr1</span> <span class="n">value1</span>
<span class="p">[</span><span class="n">attr2</span> <span class="n">value2</span><span class="o">...</span><span class="p">]]</span>
<span class="n">PARAMETER</span> <span class="n">LIST</span>
<span class="n">NAME</span>                            <span class="n">TYPE</span>                <span class="n">EXPECTED</span> <span class="n">VALUES</span>             <span class="n">DEFAULT</span>
<span class="n">current_volume_name</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>          <span class="n">String</span>
<span class="n">volume_name</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                  <span class="n">String</span>
<span class="n">volume_type</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                  <span class="n">String</span>              <span class="n">primary</span><span class="o">|</span><span class="n">secondary</span>
<span class="n">url</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                          <span class="n">String</span>
<span class="n">account</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                      <span class="n">String</span>
<span class="n">namespace</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                    <span class="n">String</span>
<span class="n">proxy_port</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                   <span class="n">Integer</span>
<span class="n">account_port</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                 <span class="n">Integer</span>
<span class="n">current_volume</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>               <span class="n">Boolean</span>             <span class="n">true</span><span class="o">|</span><span class="n">false</span>                  <span class="n">false</span>

<span class="p">(</span><span class="n">M</span><span class="p">)</span> <span class="o">==</span> <span class="n">mandatory</span> <span class="n">parameter</span><span class="p">,</span> <span class="p">(</span><span class="n">O</span><span class="p">)</span> <span class="o">==</span> <span class="n">optional</span> <span class="n">parameter</span>
</pre></div>
</div>
</section>
<section id="swift">
<span id="pws-swift"></span><h5>Swift<a class="headerlink" href="#swift" title="Permalink to this headline"></a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># add volume, run as zimbra user</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">Swift</span> <span class="n">name</span> <span class="n">secondary</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="p">{</span><span class="n">IP_ADDRESS</span><span class="p">}:</span><span class="mi">8080</span><span class="o">/</span><span class="n">auth</span><span class="o">/</span><span class="n">v1</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span> <span class="n">user</span><span class="p">:</span><span class="n">username</span> <span class="n">password</span> <span class="n">maxDeleteObjectsCount</span> <span class="mi">100</span>
<span class="c1"># Delete volume</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doDeleteVolume</span> <span class="n">name</span>
<span class="c1"># set current</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doUpdateVolume</span> <span class="n">Swift</span> <span class="n">name</span> <span class="n">current_volume</span> <span class="n">true</span>
</pre></div>
</div>
<p>zxsuite powerstore doCreateVolume Swift</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Syntax</span><span class="p">:</span>
    <span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">Swift</span> <span class="p">{</span><span class="n">volume_name</span><span class="p">}</span> <span class="p">{</span><span class="n">primary</span><span class="o">|</span><span class="n">secondary</span><span class="p">}</span> <span class="p">{</span><span class="n">url</span><span class="p">}</span> <span class="p">{</span><span class="n">username</span><span class="p">}</span> <span class="p">{</span><span class="n">password</span><span class="p">}</span> <span class="p">[</span><span class="n">attr1</span> <span class="n">value1</span> <span class="p">[</span><span class="n">attr2</span> <span class="n">value2</span><span class="o">...</span><span class="p">]]</span>

<span class="n">PARAMETER</span> <span class="n">LIST</span>

<span class="n">NAME</span>                        <span class="n">TYPE</span>        <span class="n">EXPECTED</span> <span class="n">VALUES</span>             <span class="n">DEFAULT</span>
<span class="n">volume_name</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>              <span class="n">String</span>
<span class="n">volume_type</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>              <span class="n">String</span>      <span class="n">primary</span><span class="o">|</span><span class="n">secondary</span>
<span class="n">url</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                      <span class="n">String</span>
<span class="n">username</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                 <span class="n">String</span>
<span class="n">password</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                 <span class="n">String</span>
<span class="n">maxDeleteObjectsCount</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>    <span class="n">Integer</span>     <span class="n">Number</span> <span class="n">of</span> <span class="nb">object</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">single</span> <span class="n">bulk</span> <span class="n">delete</span> <span class="n">request</span>
                                                                    <span class="mi">500</span>

<span class="p">(</span><span class="n">M</span><span class="p">)</span> <span class="o">==</span> <span class="n">mandatory</span> <span class="n">parameter</span><span class="p">,</span> <span class="p">(</span><span class="n">O</span><span class="p">)</span> <span class="o">==</span> <span class="n">optional</span> <span class="n">parameter</span>

<span class="n">Usage</span> <span class="n">example</span><span class="p">:</span>

<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">Swift</span> <span class="n">volumeName</span> <span class="n">primary</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">host</span><span class="o">/</span><span class="n">service</span> <span class="n">accountName</span> <span class="n">password</span> <span class="n">max_delete_objects_count</span> <span class="mi">100</span>
</pre></div>
</div>
<p>zxsuite powerstore doUpdateVolume Swift</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Syntax</span><span class="p">:</span>
    <span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doUpdateVolume</span> <span class="n">Swift</span> <span class="p">{</span><span class="n">current_volume_name</span><span class="p">}</span> <span class="p">[</span><span class="n">attr1</span> <span class="n">value1</span> <span class="p">[</span><span class="n">attr2</span> <span class="n">value2</span><span class="o">...</span><span class="p">]]</span>

<span class="n">PARAMETER</span> <span class="n">LIST</span>

<span class="n">NAME</span>                        <span class="n">TYPE</span>        <span class="n">EXPECTED</span> <span class="n">VALUES</span>             <span class="n">DEFAULT</span>
<span class="n">current_volume_name</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>      <span class="n">String</span>
<span class="n">volume_name</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>              <span class="n">String</span>
<span class="n">volume_type</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>              <span class="n">String</span>      <span class="n">primary</span><span class="o">|</span><span class="n">secondary</span>
<span class="n">url</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                      <span class="n">String</span>
<span class="n">username</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                 <span class="n">String</span>
<span class="n">password</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                 <span class="n">String</span>
<span class="n">maxDeleteObjectsCount</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>    <span class="n">Integer</span>     <span class="n">Number</span> <span class="n">of</span> <span class="nb">object</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">single</span> <span class="n">bulk</span> <span class="n">delete</span> <span class="n">request</span>
                                                                    <span class="mi">500</span>
<span class="n">current_volume</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>           <span class="n">Boolean</span>     <span class="n">true</span><span class="o">|</span><span class="n">false</span>                  <span class="n">false</span>

<span class="p">(</span><span class="n">M</span><span class="p">)</span> <span class="o">==</span> <span class="n">mandatory</span> <span class="n">parameter</span><span class="p">,</span> <span class="p">(</span><span class="n">O</span><span class="p">)</span> <span class="o">==</span> <span class="n">optional</span> <span class="n">parameter</span>
</pre></div>
</div>
</section>
<section id="cloudian-s3-compatible-object-storage">
<span id="pws-cloudian-s3-compatible-object-storage"></span><h5>Cloudian (S3 compatible object storage)<a class="headerlink" href="#cloudian-s3-compatible-object-storage" title="Permalink to this headline"></a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># add volume, run as zimbra user</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">Cloudian</span> <span class="n">name</span> <span class="n">secondary</span> <span class="n">bucket_name</span> <span class="n">bucket</span> <span class="n">access_key</span> <span class="n">ACCESSKEY</span> <span class="n">secret</span> <span class="n">SECRET</span> <span class="n">url</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">url</span><span class="o">.</span><span class="n">of</span><span class="o">.</span><span class="n">storage</span>
<span class="c1"># Delete volume</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doDeleteVolume</span> <span class="n">name</span>
<span class="c1"># set current</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doUpdateVolume</span> <span class="n">Cloudian</span> <span class="n">name</span> <span class="n">current_volume</span> <span class="n">true</span>
</pre></div>
</div>
<p>zxsuite powerstore doCreateVolume Cloudian</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Syntax</span><span class="p">:</span>
    <span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">Cloudian</span> <span class="p">{</span><span class="n">volume_name</span><span class="p">}</span> <span class="p">{</span><span class="n">primary</span><span class="o">|</span><span class="n">secondary</span><span class="p">}</span> <span class="p">[</span><span class="n">attr1</span> <span class="n">value1</span> <span class="p">[</span><span class="n">attr2</span> <span class="n">value2</span><span class="o">...</span><span class="p">]]</span>

<span class="n">PARAMETER</span> <span class="n">LIST</span>

<span class="n">NAME</span>                            <span class="n">TYPE</span>                <span class="n">EXPECTED</span> <span class="n">VALUES</span>
<span class="n">volume_name</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>                  <span class="n">String</span>
<span class="n">volume_type</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>                  <span class="n">Multiple</span> <span class="n">choice</span>     <span class="n">primary</span><span class="o">|</span><span class="n">secondary</span>
<span class="n">bucket_name</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                  <span class="n">String</span>              <span class="n">Bucket</span> <span class="n">name</span>
<span class="n">url</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                          <span class="n">String</span>              <span class="n">S3</span> <span class="n">API</span> <span class="n">compatible</span> <span class="n">service</span> <span class="n">url</span> <span class="p">(</span><span class="n">ex</span><span class="p">:</span> <span class="n">s3api</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">com</span><span class="p">)</span>
<span class="n">access_key</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                   <span class="n">String</span>              <span class="n">Service</span> <span class="n">username</span>
<span class="n">secret</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                       <span class="n">String</span>              <span class="n">Service</span> <span class="n">password</span>
<span class="n">server_prefix</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                <span class="n">String</span>              <span class="n">Prefix</span> <span class="n">to</span> <span class="n">the</span> <span class="n">server</span> <span class="nb">id</span> <span class="n">used</span> <span class="ow">in</span> <span class="nb">all</span> <span class="n">objects</span> <span class="n">keys</span>
<span class="n">bucket_configuration_id</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>      <span class="n">String</span>              <span class="n">UUID</span> <span class="k">for</span> <span class="n">already</span> <span class="n">existing</span> <span class="n">service</span> <span class="n">credentials</span>
                                                    <span class="p">(</span><span class="n">zxsuite</span> <span class="n">config</span> <span class="k">global</span> <span class="n">get</span> <span class="n">attribute</span> <span class="n">s3BucketConfigurations</span><span class="p">)</span>
<span class="n">prefix</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                       <span class="n">String</span>              <span class="n">Prefix</span> <span class="n">added</span> <span class="n">to</span> <span class="n">blobs</span> <span class="n">keys</span>

<span class="p">(</span><span class="n">M</span><span class="p">)</span> <span class="o">==</span> <span class="n">mandatory</span> <span class="n">parameter</span><span class="p">,</span> <span class="p">(</span><span class="n">O</span><span class="p">)</span> <span class="o">==</span> <span class="n">optional</span> <span class="n">parameter</span>

<span class="n">Usage</span> <span class="n">example</span><span class="p">:</span>

<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">Cloudian</span> <span class="n">volumeName</span> <span class="n">primary</span> <span class="n">bucket_name</span> <span class="n">bucket</span> <span class="n">url</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">host</span><span class="o">/</span><span class="n">service</span> <span class="n">access_key</span> <span class="n">accessKey</span> <span class="n">secret</span> <span class="n">secretKet</span>
<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doCreateVolume</span> <span class="n">Cloudian</span> <span class="n">volumeName</span> <span class="n">primary</span> <span class="n">bucket_configuration_id</span> <span class="n">uuid</span>
</pre></div>
</div>
<p>zxsuite powerstore doUpdateVolume Cloudian</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Syntax</span><span class="p">:</span>
    <span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doUpdateVolume</span> <span class="n">Cloudian</span> <span class="p">{</span><span class="n">current_volume_name</span><span class="p">}</span> <span class="p">[</span><span class="n">attr1</span> <span class="n">value1</span> <span class="p">[</span><span class="n">attr2</span> <span class="n">value2</span><span class="o">...</span><span class="p">]]</span>

<span class="n">PARAMETER</span> <span class="n">LIST</span>

<span class="n">NAME</span>                            <span class="n">TYPE</span>                <span class="n">EXPECTED</span> <span class="n">VALUES</span>             <span class="n">DEFAULT</span>
<span class="n">current_volume_name</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>          <span class="n">String</span>
<span class="n">volume_name</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                  <span class="n">String</span>
<span class="n">volume_type</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                  <span class="n">String</span>              <span class="n">primary</span><span class="o">|</span><span class="n">secondary</span>
<span class="n">server_prefix</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                <span class="n">String</span>              <span class="n">Prefix</span> <span class="n">to</span> <span class="n">the</span> <span class="n">server</span> <span class="nb">id</span> <span class="n">used</span> <span class="ow">in</span> <span class="nb">all</span> <span class="n">objects</span> <span class="n">keys</span>
<span class="n">bucket_configuration_id</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>      <span class="n">String</span>              <span class="n">UUID</span> <span class="k">for</span> <span class="n">already</span> <span class="n">existing</span> <span class="n">service</span> <span class="n">credentials</span>
                                                    <span class="p">(</span><span class="n">zxsuite</span> <span class="n">config</span> <span class="k">global</span> <span class="n">get</span> <span class="n">attribute</span> <span class="n">s3BucketConfigurations</span><span class="p">)</span>
<span class="n">current_volume</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>               <span class="n">Boolean</span>             <span class="n">true</span><span class="o">|</span><span class="n">false</span>                  <span class="n">false</span>

<span class="p">(</span><span class="n">M</span><span class="p">)</span> <span class="o">==</span> <span class="n">mandatory</span> <span class="n">parameter</span><span class="p">,</span> <span class="p">(</span><span class="n">O</span><span class="p">)</span> <span class="o">==</span> <span class="n">optional</span> <span class="n">parameter</span>
</pre></div>
</div>
</section>
</section>
<section id="volume-deletion">
<span id="pws-volume-deletion"></span><h4>Volume Deletion<a class="headerlink" href="#volume-deletion" title="Permalink to this headline"></a></h4>
<p>zxsuite powerstore doDeleteVolume</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Syntax</span><span class="p">:</span>
    <span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doDeleteVolume</span> <span class="p">{</span><span class="n">volume_name</span><span class="p">}</span>

<span class="n">PARAMETER</span> <span class="n">LIST</span>

<span class="n">NAME</span>                            <span class="n">TYPE</span>
<span class="n">volume_name</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>                  <span class="n">String</span>

<span class="p">(</span><span class="n">M</span><span class="p">)</span> <span class="o">==</span> <span class="n">mandatory</span> <span class="n">parameter</span><span class="p">,</span> <span class="p">(</span><span class="n">O</span><span class="p">)</span> <span class="o">==</span> <span class="n">optional</span> <span class="n">parameter</span>

<span class="n">Usage</span> <span class="n">example</span><span class="p">:</span>

<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">dodeletevolume</span> <span class="n">hsm</span>
<span class="n">Deletes</span> <span class="n">volume</span> <span class="k">with</span> <span class="n">name</span> <span class="n">hsm</span>
</pre></div>
</div>
</section>
<section id="move-all-data-from-a-volume-to-another">
<span id="pws-move-all-data-from-a-volume-to-another"></span><h4>Move all data from a volume to another<a class="headerlink" href="#move-all-data-from-a-volume-to-another" title="Permalink to this headline"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Syntax</span><span class="p">:</span>
   <span class="n">zxsuite</span> <span class="n">hsm</span> <span class="n">doVolumeToVolumeMove</span> <span class="p">{</span><span class="n">source_volume_name</span><span class="p">}</span> <span class="p">{</span><span class="n">destination_volume_name</span><span class="p">}</span> <span class="p">[</span><span class="n">attr1</span> <span class="n">value1</span> <span class="p">[</span><span class="n">attr2</span> <span class="n">value2</span><span class="o">...</span><span class="p">]]</span>

<span class="n">PARAMETER</span> <span class="n">LIST</span>

<span class="n">NAME</span>                          <span class="n">TYPE</span>       <span class="n">EXPECTED</span> <span class="n">VALUES</span>    <span class="n">DEFAULT</span>
<span class="n">source_volume_name</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>         <span class="n">String</span>
<span class="n">destination_volume_name</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>    <span class="n">String</span>
<span class="n">only_drive</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                 <span class="n">Boolean</span>    <span class="n">true</span><span class="o">|</span><span class="n">false</span>         <span class="n">false</span>
<span class="n">read_error_threshold</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>       <span class="n">Integer</span>
<span class="n">policy</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                     <span class="n">String</span>                        <span class="n">none</span>

<span class="p">(</span><span class="n">M</span><span class="p">)</span> <span class="o">==</span> <span class="n">mandatory</span> <span class="n">parameter</span><span class="p">,</span> <span class="p">(</span><span class="n">O</span><span class="p">)</span> <span class="o">==</span> <span class="n">optional</span> <span class="n">parameter</span>

<span class="n">Usage</span> <span class="n">example</span><span class="p">:</span>

<span class="n">zxsuite</span> <span class="n">hsm</span> <span class="n">doVolumeToVolumeMove</span> <span class="n">sourceVolume</span> <span class="n">destVolume</span>
<span class="n">Moves</span> <span class="n">the</span> <span class="n">whole</span> <span class="n">sourceVolume</span> <span class="n">to</span> <span class="n">destVolume</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="hierarchical-storage-management">
<span id="pws-hsm"></span><h2>Hierarchical Storage Management<a class="headerlink" href="#hierarchical-storage-management" title="Permalink to this headline"></a></h2>
<section id="the-hierarchical-storage-management-technique">
<span id="pws-the-hierarchical-storage-management-technique"></span><h3>The Hierarchical Storage Management Technique<a class="headerlink" href="#the-hierarchical-storage-management-technique" title="Permalink to this headline"></a></h3>
<p>HSM is a data storage technique that moves data between different stores
according to a defined policy.</p>
<p>The most common use of the HSM technique is the move of <em>older</em> data
from a faster-but-expensive storage device to a slower-but-cheaper one
based on the following premises:</p>
<ul class="simple">
<li><p>Fast storage costs more.</p></li>
<li><p>Slow storage costs less.</p></li>
<li><p><em>Old</em> data will be accessed much less frequently than <em>new</em> data.</p></li>
</ul>
<p>The advantages of the HSM technique are clear: Lowering the overall
storage cost since only a small part of your data needs to be on costly
storage, and improving the overall user experience.</p>
<section id="stores-volumes-and-policies">
<span id="pws-stores-volumes-and-policies"></span><h4>Stores, Volumes and Policies<a class="headerlink" href="#stores-volumes-and-policies" title="Permalink to this headline"></a></h4>
<p>Using HSM requires a clear understanding of some related terms:</p>
<ul class="simple">
<li><p>Primary Store: The <em>fast-but-expensive</em> store where all your data is
initially placed.</p></li>
<li><p>Secondary Store: The <em>slow-but-cheap</em> store where <em>older</em> data will
be moved to.</p></li>
</ul>
</section>
</section>
<section id="domoveblobs">
<span id="pws-domoveblobs"></span><h3>doMoveBlobs<a class="headerlink" href="#domoveblobs" title="Permalink to this headline"></a></h3>
<section id="the-domoveblobs-operation-of-zextras-powerstore">
<span id="pws-the-domoveblobs-operation-of-zextras-powerstore"></span><h4>The doMoveBlobs Operation of Zextras Powerstore<a class="headerlink" href="#the-domoveblobs-operation-of-zextras-powerstore" title="Permalink to this headline"></a></h4>
<p>The doMoveBlobs is the heart of Zextras Powerstore.</p>
<p>It moves items between the Current Primary Store and the Current
Secondary Store according to the proper HSM policy.</p>
<p>The move is performed by a transactional algorithm. Should an error
occur during one of the steps of the operation, a rollback takes place
and no change will be made to the data.</p>
<p>Once Zextras Powerstore identifies the items to be moved, the following
steps are performed:</p>
<ul class="simple">
<li><p>A copy of the Blob to the Current Secondary Store is created.</p></li>
<li><p>The Zimbra Database is updated to notify Zimbra of the item’s new
position.</p></li>
<li><p>The original Blob is deleted from the Current Primary Store.</p></li>
</ul>
<section id="what-is-moved">
<span id="pws-what-is-moved"></span><h5>What is Moved?<a class="headerlink" href="#what-is-moved" title="Permalink to this headline"></a></h5>
<p>Every item that complies with the specified HSM policy is moved.</p>
<p>Example:</p>
<p>The following policy</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">message</span><span class="p">,</span><span class="n">document</span><span class="p">:</span><span class="n">before</span><span class="p">:</span><span class="o">-</span><span class="mi">20</span><span class="n">day</span>
<span class="n">message</span><span class="p">:</span><span class="n">before</span><span class="p">:</span><span class="o">-</span><span class="mi">10</span><span class="n">day</span> <span class="n">has</span><span class="p">:</span><span class="n">attachment</span>
</pre></div>
</div>
<p>will move all emails and documents older than 20 days along with all
emails older than 10 days that contain an attachment.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>By default, results from the Trash folder do not appear
in any search–and this includes the HSM Policy. In order to ensure
that all items are moved, add “is:anywhere” to your policy.</p>
</div>
</section>
<section id="policy-order">
<span id="pws-policy-order"></span><h5>Policy Order<a class="headerlink" href="#policy-order" title="Permalink to this headline"></a></h5>
<p>All conditions for a policy are executed in the exact order they are
specified. Zextras Powerstore will loop on all items in the Current
Primary Store and apply each separate condition before starting the next
one.</p>
<p>This means that the following policies</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">message</span><span class="p">,</span><span class="n">document</span><span class="p">:</span><span class="n">before</span><span class="p">:</span><span class="o">-</span><span class="mi">20</span><span class="n">day</span>
<span class="n">message</span><span class="p">:</span><span class="n">before</span><span class="p">:</span><span class="o">-</span><span class="mi">10</span><span class="n">day</span> <span class="n">has</span><span class="p">:</span><span class="n">attachment</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">message</span><span class="p">:</span><span class="n">before</span><span class="p">:</span><span class="o">-</span><span class="mi">10</span><span class="n">day</span> <span class="n">has</span><span class="p">:</span><span class="n">attachment</span>
<span class="n">message</span><span class="p">,</span><span class="n">document</span><span class="p">:</span><span class="n">before</span><span class="p">:</span><span class="o">-</span><span class="mi">20</span><span class="n">day</span>
</pre></div>
</div>
<p>applied daily on a sample server that sends/receives a total of 1000
emails per day, 100 of which contain one or more attachments, will have
the same final result. However, the execution time of the second policy
will probably be slightly higher (or much higher, depending on the
number and size of the emails on the server).</p>
<p>This is because in the first policy, the first condition
(message,document:before:-20day) will loop on all items and move many of
them to the Current Secondary Store, leaving fewer items for the second
condition to loop on.</p>
<p>Likewise, having the <code class="docutils literal notranslate"><span class="pre">message:before:-10day</span> <span class="pre">has:attachment</span></code> as the
first condition will leave more items for the second condition to loop
on.</p>
<p>This is just an example and does not apply to all cases, but gives an
idea of the need to carefully plan your HSM policy.</p>
</section>
</section>
<section id="executing-the-domoveblobs-operation-a-k-a-applying-the-hsm-policy">
<span id="pws-executing-the-domoveblobs-operation-a-k-a-applying-the-hsm-policy"></span><h4>Executing the doMoveBlobs Operation (a.k.a. Applying the HSM Policy)<a class="headerlink" href="#executing-the-domoveblobs-operation-a-k-a-applying-the-hsm-policy" title="Permalink to this headline"></a></h4>
<p><em>Applying a policy</em> means running the <code class="docutils literal notranslate"><span class="pre">doMoveBlobs</span></code> operation in order
to move items between the Primary and Secondary store according to the
defined policy.</p>
<p>Zextras Powerstore gives you three different options:</p>
<ul class="simple">
<li><p>Via the Administration Zimlet</p></li>
<li><p>Via the CLI</p></li>
<li><p>Through Scheduling</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Items in <strong>Trash</strong> or dumpster folders are not moved to
the secondary store by the HSM module. Currently, there is no
option to define a policy for <strong>Trash</strong> and dumpster.</p>
</div>
<section id="apply-the-hsm-policy-via-the-administration-zimlet">
<span id="pws-apply-the-hsm-policy-via-the-administration-zimlet"></span><h5>Apply the HSM Policy via the Administration Zimlet<a class="headerlink" href="#apply-the-hsm-policy-via-the-administration-zimlet" title="Permalink to this headline"></a></h5>
<p>To apply the HSM Policy via the Administration Zimlet:</p>
<ul class="simple">
<li><p>Log into the Zimbra Administration Console.</p></li>
<li><p>Click the <em>Zextras Powerstore</em> entry in the Administration Zimlet.</p></li>
<li><p>Click the <em>Apply Policy</em> button.</p></li>
</ul>
</section>
<section id="apply-the-hsm-policy-via-the-cli">
<span id="pws-apply-the-hsm-policy-via-the-cli"></span><h5>Apply the HSM Policy via the CLI<a class="headerlink" href="#apply-the-hsm-policy-via-the-cli" title="Permalink to this headline"></a></h5>
<p>To apply the HSM Policy via the CLI, run the following command as the
<em>zimbra</em> user:</p>
<p><code class="docutils literal notranslate"><span class="pre">zxsuite</span> <span class="pre">powerstore</span> <span class="pre">doMoveBlobs</span></code></p>
</section>
<section id="apply-the-hsm-policy-through-scheduling">
<span id="pws-apply-the-hsm-policy-through-scheduling"></span><h5>Apply the HSM Policy through Scheduling<a class="headerlink" href="#apply-the-hsm-policy-through-scheduling" title="Permalink to this headline"></a></h5>
<p>To schedule a daily execution of the <code class="docutils literal notranslate"><span class="pre">doMoveBlobs</span></code> operation:</p>
<ul class="simple">
<li><p>Log into the Zimbra Administration Console.</p></li>
<li><p>Click the <em>Zextras Powerstore</em> entry in the Administration Zimlet.</p></li>
<li><p>Enable scheduling by selecting the <code class="docutils literal notranslate"><span class="pre">Enable</span> <span class="pre">HSM</span> <span class="pre">Session</span> <span class="pre">scheduling:</span></code>
button.</p></li>
<li><p>Select the hour to run the operation under
<code class="docutils literal notranslate"><span class="pre">HSM</span> <span class="pre">Session</span> <span class="pre">scheduled</span> <span class="pre">for:</span></code>.</p></li>
</ul>
</section>
</section>
<section id="domoveblobs-stats-and-info">
<span id="pws-domoveblobs-stats-and-info"></span><h4>doMoveBlobs Stats and Info<a class="headerlink" href="#domoveblobs-stats-and-info" title="Permalink to this headline"></a></h4>
<p>Information about disk space savings, operation performances and more
are available by clicking the <em>Stats</em> button under the <code class="docutils literal notranslate"><span class="pre">Secondary</span>
<span class="pre">Volumes</span></code> list in the Zextras Powerstore tab of the Administration
Zimlet.</p>
</section>
</section>
</section>
<section id="policy-management">
<span id="pws-policy-management"></span><h2>Policy Management<a class="headerlink" href="#policy-management" title="Permalink to this headline"></a></h2>
<section id="what-is-a-policy">
<span id="pws-what-is-a-policy"></span><h3>What is a Policy?<a class="headerlink" href="#what-is-a-policy" title="Permalink to this headline"></a></h3>
<p>An HSM policy is a set of rules that define what items will be moved
from the Primary Store to the Secondary Store when the <code class="docutils literal notranslate"><span class="pre">doMoveBlobs</span></code>
operation of Zextras Powerstore is triggered, either manually or by
scheduling.</p>
<p>A policy can consist of a single rule that is valid for all item types
(<em>Simple</em> policy) or multiple rules valid for one or more item types
(<em>Composite</em> policy). Also, an additional <em>sub-rule</em> can be defined
using Zimbra’s <a class="reference external" href="http://wiki.zimbra.com/wiki/Zimbra_Web_Client_Search_Tips">search
syntax</a>.</p>
<section id="policy-examples">
<span id="pws-policy-examples"></span><h4>Policy Examples<a class="headerlink" href="#policy-examples" title="Permalink to this headline"></a></h4>
<p>Here are some policy examples. To see how to create the policies in the
Zextras Powerstore module, see below.</p>
<ul class="simple">
<li><p><em>Move all items older than 30 days</em></p></li>
<li><p><em>Move emails older than 15 days and items of all other kinds older
than 30 days</em></p></li>
<li><p><em>Move calendar items older than 15 days, Drive items older than 20
days and all emails in the “Archive” folder</em></p></li>
</ul>
</section>
</section>
<section id="defining-a-policy">
<span id="pws-defining-a-policy"></span><h3>Defining a Policy<a class="headerlink" href="#defining-a-policy" title="Permalink to this headline"></a></h3>
<p>Policies can be defined both from the Zextras Powerstore tab of the
Administration Zimlet and from the CLI. You can specify a Zimbra Search
in both cases.</p>
<section id="from-the-administration-zimlet">
<span id="pws-from-the-administration-zimlet"></span><h4>From the Administration Zimlet<a class="headerlink" href="#from-the-administration-zimlet" title="Permalink to this headline"></a></h4>
<p>To define a policy from the Administration Zimlet:</p>
<ul class="simple">
<li><p>Log into the Zimbra Administration Console.</p></li>
<li><p>Click <em>Zextras Powerstore</em> on the Administration Zimlet.</p></li>
<li><p>Click the <em>Add</em> button in the Storage Management Policy section.</p></li>
<li><p>Select the Item Types from the <code class="docutils literal notranslate"><span class="pre">Items</span> <span class="pre">to</span> <span class="pre">Move:</span></code> list.</p></li>
<li><p>Enter the Item Age from the <code class="docutils literal notranslate"><span class="pre">Move</span> <span class="pre">Items</span> <span class="pre">older</span> <span class="pre">than:</span></code> box.</p></li>
<li><p><strong>OPTIONAL</strong>: Add a Zimbra Search in the <em>Additional Options</em> box.</p></li>
<li><p>You can add multiple <em>lines</em> to narrow down your policy. Every <em>line</em>
will be evaluated and executed after the line before has been
applied.</p></li>
</ul>
</section>
<section id="from-the-cli">
<span id="pws-from-the-cli"></span><h4>From the CLI<a class="headerlink" href="#from-the-cli" title="Permalink to this headline"></a></h4>
<p>Two policy management commands are available in the CLI:</p>
<div class="informalexample docutils container">
<p>zxsuite powerstore setHSMPolicy <em>hsm_policy</em></p>
</div>
<div class="informalexample docutils container">
<p>zxsuite powerstore +setHsmPolicy <em>hsm_policy</em></p>
</div>
<p>These command share the same syntax (see
<a class="reference external" href="./cli.xml#powerstore_setHSMPolicy">setHSMPolicy</a> and
<a class="reference external" href="./cli.xml#powerstore_plus_setHsmPolicy">+setHsmPolicy</a>); the
difference is that <code class="docutils literal notranslate"><span class="pre">setHSMPolicy</span></code> creates <strong>new</strong> policies,
<em>replacing</em> existing one, while <code class="docutils literal notranslate"><span class="pre">+setHSMPolicy</span></code> <em>adds</em> policies to
existing ones.</p>
</section>
</section>
</section>
<section id="zextras-powerstore-and-s3-buckets">
<span id="pws-zextras-powerstore-and-s3-buckets"></span><h2>Zextras Powerstore and S3 buckets<a class="headerlink" href="#zextras-powerstore-and-s3-buckets" title="Permalink to this headline"></a></h2>
<p>Primary and Secondary volumes created with Zextras Powerstore can be
hosted on S3 buckets, effectively moving the largest part of your data
to secure and durable cloud storage.</p>
<section id="pws-s3-compatible-services">
<span id="id2"></span><h3>S3-compatible Services<a class="headerlink" href="#pws-s3-compatible-services" title="Permalink to this headline"></a></h3>
<p>While any storage service compatible with the Amazon S3 API should work
out of the box with Zextras Powerstore, listed here are the only
officially supported platforms:</p>
<ul class="simple">
<li><p>FileBlob (standard local volume)</p></li>
<li><p>Amazon S3</p></li>
<li><p>EMC</p></li>
<li><p>OpenIO</p></li>
<li><p>Swift</p></li>
<li><p>Scality S3</p></li>
<li><p>Cloudian</p></li>
<li><p>Custom S3 (any unsupported S3-compliant solution)</p></li>
</ul>
</section>
<section id="primary-volumes-and-the-incoming-directory">
<span id="pws-primary-volumes-and-the-incoming-directory"></span><h3>Primary Volumes and the “Incoming” directory<a class="headerlink" href="#primary-volumes-and-the-incoming-directory" title="Permalink to this headline"></a></h3>
<p>In order to create a remote <em>Primary Store</em> on a mailbox server a local
“Incoming” directory must exist on that server. The default directory is
<code class="docutils literal notranslate"><span class="pre">/opt/zimbra/incoming</span></code>, but you can check or modify the current value
using these commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>zxsuite config server get <span class="k">$(</span>zmhostname<span class="k">)</span> attribute incomingPath
zxsuite config server <span class="nb">set</span> <span class="k">$(</span>zmhostname<span class="k">)</span> attribute incomingPath value /path/to/dir
</pre></div>
</div>
</section>
<section id="local-cache">
<span id="pws-local-cache"></span><h3>Local Cache<a class="headerlink" href="#local-cache" title="Permalink to this headline"></a></h3>
<p>Storing a volume on third-party remote storage solutions requires a
local directory to be used for item caching, which must be readable and
writable by the <em>zimbra</em> user.</p>
<p>The local directory must be created manually and its path must be
entered in the <em>Zextras Powerstore</em> section of the Administration Zimlet
in the Zimbra Administration Console.</p>
<p>If the Local Cache directory is not set, you won’t be able to create any
secondary volume on an S3-compatible device or service.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Failing to correctly configure the cache directory will
cause items to be unretrievable, meaning that users will get a <code class="docutils literal notranslate"><span class="pre">No</span>
<span class="pre">such</span> <span class="pre">BLOB</span></code> error when trying to access any item stored on an S3
volume.</p>
</div>
</section>
<section id="bucket-setup">
<span id="pws-bucket-setup"></span><h3>Bucket Setup<a class="headerlink" href="#bucket-setup" title="Permalink to this headline"></a></h3>
<p>Zextras Powerstore doesn’t need any dedicated setting or configuration
on the S3 side, so setting up a bucket for your volumes is easy.
Although creating a dedicated user bucket and access policy are not
required, they are strongly suggested because they make it much easier
to manage.</p>
<p>All you need to start storing your secondary volumes on S3 is:</p>
<ul class="simple">
<li><p>An S3 bucket. You need to know the bucket’s name and region in order
to use it.</p></li>
<li><p>A user’s Access Key and Secret.</p></li>
<li><p>A policy that grants the user full rights on your bucket.</p></li>
</ul>
</section>
<section id="bucket-management">
<span id="pws-bucket-management"></span><h3>Bucket Management<a class="headerlink" href="#bucket-management" title="Permalink to this headline"></a></h3>
<p>A centralized Bucket Management UI is available in the Zimbra
Administration Console. This facilitates saving bucket information to be
reused when creating a new volume on an S3-compatible storage instead of
entering the information each time.</p>
<p>To access the Bucket Management UI:</p>
<ul class="simple">
<li><p>Access the Zimbra Administration Console</p></li>
<li><p>Select the “Configure” entry on the left menu</p></li>
<li><p>Select the “Global Settings” entry</p></li>
<li><p>Select the S3 Buckets entry</p></li>
</ul>
<p>Any bucket added to the system will be available when creating a new
volume of the following type: Amazon S3, Ceph, Cloudian, EMC, Scality
S3, Custom S3, Yandex, Alibaba.</p>
<p>It’s also possible to create new buckets via the CLI using the
<code class="docutils literal notranslate"><span class="pre">doCreateBucket</span></code> command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>zimbra@mail:~$ zxsuite core doCreateBucket

Create a bucket configuration

  S3                       - Add a bucket configuration for S3 Object Storage
                             zxsuite core doCreateBucket S3 {Amazon AWS bucket} {Service username} {Service password} [attr1 value1 [attr2 value2...]]

  Ceph                     - Add a bucket configuration for Ceph Object Storage
                             zxsuite core doCreateBucket Ceph {Bucket name} {Service username} {Service password} {S3 API compatible service url (ex: s3api.service.com)} [attr1 value1 [attr2 value2...]]

  Cloudian                 - Add a bucket configuration for Cloudian Object Storage
                             zxsuite core doCreateBucket Cloudian {Bucket name} {Service username} {Service password} {S3 API compatible service url (ex: s3api.service.com)} [attr1 value1 [attr2 value2...]]

  EMC                      - Add a bucket configuration for EMC Object Storage
                             zxsuite core doCreateBucket EMC {Bucket name} {Service username} {Service password} {S3 API compatible service url (ex: s3api.service.com)} [attr1 value1 [attr2 value2...]]

  ScalityS3                - Add a bucket configuration for ScalityS3 Object Storage
                             zxsuite core doCreateBucket ScalityS3 {Bucket name} {Service username} {Service password} {S3 API compatible service url (ex: s3api.service.com)} [attr1 value1 [attr2 value2...]]

  CustomS3                 - Add a bucket configuration for CustomS3 Object Storage
                             zxsuite core doCreateBucket CustomS3 {Bucket name} {Service username} {Service password} {S3 API compatible service url (ex: s3api.service.com)} [attr1 value1 [attr2 value2...]]

  Yandex                   - Add a bucket configuration for Yandex Object Storage
                             zxsuite core doCreateBucket Yandex {Bucket name} {Service username} {Service password} [attr1 value1 [attr2 value2...]]

  Alibaba                  - Add a bucket configuration for Alibaba Object Storage
                             zxsuite core doCreateBucket Alibaba {Bucket name} {Service username} {Service password} [attr1 value1 [attr2 value2...]]
</pre></div>
</div>
</section>
<section id="bucket-paths-and-naming">
<span id="pws-bucket-paths-and-naming"></span><h3>Bucket paths and naming<a class="headerlink" href="#bucket-paths-and-naming" title="Permalink to this headline"></a></h3>
<p>Files are stored in a bucket according to a well-defined path, which can
be customized at will in order to make your bucket’s contents easier to
understand even on multi-server environments with multiple secondary
volumes:</p>
<p><code class="docutils literal notranslate"><span class="pre">/Bucket</span> <span class="pre">Name/Destination</span> <span class="pre">Path/[Volume</span> <span class="pre">Prefix-]serverID/</span></code></p>
<ul class="simple">
<li><p>The <strong>Bucket Name</strong> and <strong>Destination Path</strong> are not tied to the
volume itself, and there can be as many volumes under the same
destination path as you wish.</p></li>
<li><p>The <strong>Volume Prefix</strong>, on the other hand, is specific to each volume
and it’s a quick way to differentiate and recognize different volumes
within the bucket.</p></li>
</ul>
</section>
<section id="creating-volumes-with-zextras-powerstore">
<span id="pws-creating-volumes-with-zextras-powerstore"></span><h3>Creating Volumes with Zextras Powerstore<a class="headerlink" href="#creating-volumes-with-zextras-powerstore" title="Permalink to this headline"></a></h3>
<p>To create a new volume with Zextras Powerstore from the Zimbra
Administration Console:</p>
<ul class="simple">
<li><p>Enter the HSM Section of the Zextras Administration Zimlet in the
Zimbra Administration Console</p></li>
<li><p>Click on <em>Add</em> under either the <em>Primary Volumes</em> or <em>Secondary
Volumes</em> list</p></li>
<li><p>Select the Volume Type among the available storage choices</p></li>
<li><p>Enter the required volume information</p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Each volume type will require different information to
be set up, please refer to your storage provider’s online resources
to obtain those details.</p>
</div>
</section>
<section id="editing-volumes-with-zextras-powerstore">
<span id="pws-editing-volumes-with-zextras-powerstore"></span><h3>Editing Volumes with Zextras Powerstore<a class="headerlink" href="#editing-volumes-with-zextras-powerstore" title="Permalink to this headline"></a></h3>
<p>To edit a volume with Zextras Powerstore from the Zimbra Administration
Console:</p>
<ul class="simple">
<li><p>Enter the HSM Section of the Zextras Administration Zimlet in the
Zimbra Administration Console</p></li>
<li><p>Select a volume</p></li>
<li><p>Click on <em>Edit</em></p></li>
<li><p>When done, click <em>Save</em></p></li>
</ul>
</section>
<section id="deleting-volumes-with-zextras-powerstore">
<span id="pws-deleting-volumes-with-zextras-powerstore"></span><h3>Deleting Volumes with Zextras Powerstore<a class="headerlink" href="#deleting-volumes-with-zextras-powerstore" title="Permalink to this headline"></a></h3>
<p>To delete a volume with Zextras Powerstore from the Zimbra
Administration Console:</p>
<ul class="simple">
<li><p>Enter the HSM Section of the Zextras Administration Zimlet in the
Zimbra Administration Console</p></li>
<li><p>Select a volume</p></li>
<li><p>Click on <em>Delete</em></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only empty volumes can be deleted.</p>
</div>
</section>
<section id="amazon-s3-tips">
<span id="pws-amazon-s3-tips"></span><h3>Amazon S3 Tips<a class="headerlink" href="#amazon-s3-tips" title="Permalink to this headline"></a></h3>
<section id="bucket">
<span id="pws-bucket"></span><h4>Bucket<a class="headerlink" href="#bucket" title="Permalink to this headline"></a></h4>
<p>Storing your secondary Zimbra volumes on Amazon S3 doesn’t have any
specific bucket requirements, but we suggest that you create a dedicated
bucket and disable Static Website Hosting for easier management.</p>
</section>
<section id="user">
<span id="pws-user"></span><h4>User<a class="headerlink" href="#user" title="Permalink to this headline"></a></h4>
<p>To obtain an Access Key and the related Secret, a <code class="docutils literal notranslate"><span class="pre">Programmatic</span>
<span class="pre">Access</span></code> user is needed. We suggest that you create a dedicated user in
Amazon’s IAM Service for easier management.</p>
</section>
<section id="rights-management">
<span id="pws-rights-management"></span><h4>Rights Management<a class="headerlink" href="#rights-management" title="Permalink to this headline"></a></h4>
<p>In Amazon’s IAM, you can set access policies for your users. It’s
mandatory that the user of your Access Key and Secret has a set of
appropriate rights both on the bucket itself and on its contents. For
easier management, we recommend granting full rights as shown in the
following example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{
    `Version`: `[LATEST API VERSION]`,
    `Statement`: [
        {
            `Sid`: `[AUTOMATICALLY GENERATED]`,
            `Effect`: `Allow`,
            `Action`: [
                `s3:*`
            ],
            `Resource`: [
                `[BUCKET ARN]/*`,
                `[BUCKET ARN]`
            ]
        }
    ]
}
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is not a valid configuration policy. Don’t copy and
paste it into your user’s settings as it won’t be validated.</p>
</div>
<p>If you only wish to grant minimal permissions, change the <code class="docutils literal notranslate"><span class="pre">Action</span></code>
section to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&quot;Action&quot;: [
                `s3:PutObject`,
                `s3:GetObject`,
                `s3:DeleteObject`,
                `s3:AbortMultipartUpload`
              ],
</pre></div>
</div>
<p>The bucket’s ARN is expressed according to Amazon’s standard naming
format: <strong>arn:partition:service:region:account-id:resource</strong>. For more
information about this topic, please see Amazon’s documentation.</p>
</section>
<section id="pws-bucket-paths-and-naming-2">
<span id="id3"></span><h4>Bucket Paths and Naming<a class="headerlink" href="#pws-bucket-paths-and-naming-2" title="Permalink to this headline"></a></h4>
<p>Files are stored in a bucket according to a well-defined path, which can
be customized at will to make your bucket’s contents easier to
understand (even on multi-server environments with multiple secondary
volumes):</p>
<p>/<strong>Bucket Name</strong>/<strong>Destination Path</strong>/<strong>serverID</strong>/</p>
<p>The <strong>Bucket Name</strong> and <strong>Destination Path</strong> are not tied to the volume
itself, and there can be as many volumes under the same destination path
as you wish.</p>
<p>The <strong>Volume Prefix</strong>, on the other hand, is specific to each volume and
it’s a quick way to differentiate and recognize different volumes within
the bucket.</p>
</section>
<section id="infrequent-access-storage-class">
<span id="pws-infrequent-access-storage-class"></span><h4>Infrequent Access Storage Class<a class="headerlink" href="#infrequent-access-storage-class" title="Permalink to this headline"></a></h4>
<p>Zextras Powerstore is compatible with the
<code class="docutils literal notranslate"><span class="pre">Amazon</span> <span class="pre">S3</span> <span class="pre">Standard</span> <span class="pre">-</span> <span class="pre">Infrequent</span> <span class="pre">access</span></code> storage class and will set
any file larger than the <code class="docutils literal notranslate"><span class="pre">Infrequent</span> <span class="pre">Access</span>
<span class="pre">Threshold</span></code> value to this storage class as long as the option has been
enabled on the volume.</p>
<p>For more information about Infrequent Access, please refer to the
official Amazon S3 <a class="reference external" href="https://aws.amazon.com/s3/storage-classes/#Infrequent_access">Infrequent Access Documentation</a>.</p>
</section>
<section id="intelligent-tiering-storage-class">
<span id="pws-intelligent-tiering-storage-class"></span><h4>Intelligent Tiering Storage Class<a class="headerlink" href="#intelligent-tiering-storage-class" title="Permalink to this headline"></a></h4>
<p>Zextras Powerstore is compatible with the
<code class="docutils literal notranslate"><span class="pre">Amazon</span> <span class="pre">S3</span> <span class="pre">-</span> <span class="pre">Intelligent</span> <span class="pre">Tiering</span></code> storage class and will set the
appropriate Intelligent Tiering flag on all files, as long as the option
has been enabled on the volume.</p>
<p>For more information about Intelligent Tiering, please refer to the
official Amazon S3 <a class="reference external" href="https://aws.amazon.com/s3/storage-classes/#Unknown_or_changing_access/">Intelligent Tiering Documentation</a>.</p>
</section>
</section>
</section>
<section id="item-deduplication">
<span id="pws-item-deduplication"></span><h2>Item Deduplication<a class="headerlink" href="#item-deduplication" title="Permalink to this headline"></a></h2>
<section id="what-is-item-deduplication">
<span id="pws-what-is-item-deduplication"></span><h3>What is Item Deduplication<a class="headerlink" href="#what-is-item-deduplication" title="Permalink to this headline"></a></h3>
<p>Item deduplication is a technique that allows you to save disk space by
storing a single copy of an item and referencing it multiple times
instead of storing multiple copies of the same item and referencing each
copy only once.</p>
<p>This might seem like a minor improvement. However, in practical use, it
makes a significant difference.</p>
<section id="item-deduplication-in-zimbra">
<span id="pws-item-deduplication-in-zimbra"></span><h4>Item Deduplication in Zimbra<a class="headerlink" href="#item-deduplication-in-zimbra" title="Permalink to this headline"></a></h4>
<p>Item deduplication is performed by Zimbra at the moment of storing a new
item in the Current Primary Volume.</p>
<p>When a new item is being created, its <code class="docutils literal notranslate"><span class="pre">message</span> <span class="pre">ID</span></code> is compared to a
list of cached items. If there is a match, a hard link to the cached
message’s BLOB is created instead of a whole new BLOB for the message.</p>
<p>The dedupe cache is managed in Zimbra through the following config
attributes:</p>
<p><strong>zimbraPrefDedupeMessagesSentToSelf</strong></p>
<p>Used to set the deduplication behavior for sent-to-self messages.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">attr</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;144&quot;</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;zimbraPrefDedupeMessagesSentToSelf&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;enum&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;dedupeNone,secondCopyifOnToOrCC,dedupeAll&quot;</span> <span class="n">cardinality</span><span class="o">=</span><span class="s2">&quot;single&quot;</span>
<span class="n">optionalIn</span><span class="o">=</span><span class="s2">&quot;account,cos&quot;</span> <span class="n">flags</span><span class="o">=</span><span class="s2">&quot;accountInherited,domainAdminModifiable&quot;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">defaultCOSValue</span><span class="o">&gt;</span><span class="n">dedupeNone</span><span class="o">&lt;/</span><span class="n">defaultCOSValue</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">desc</span><span class="o">&gt;</span><span class="n">dedupeNone</span><span class="o">|</span><span class="n">secondCopyIfOnToOrCC</span><span class="o">|</span><span class="n">moveSentMessageToInbox</span><span class="o">|</span><span class="n">dedupeAll</span><span class="o">&lt;/</span><span class="n">desc</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">attr</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>zimbraMessageIdDedupeCacheSize</strong></p>
<p>Number of cached Message IDs.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">attr</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;334&quot;</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;zimbraMessageIdDedupeCacheSize&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;integer&quot;</span> <span class="n">cardinality</span><span class="o">=</span><span class="s2">&quot;single&quot;</span> <span class="n">optionalIn</span><span class="o">=</span><span class="s2">&quot;globalConfig&quot;</span> <span class="nb">min</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">globalConfigValue</span><span class="o">&gt;</span><span class="mi">3000</span><span class="o">&lt;/</span><span class="n">globalConfigValue</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">desc</span><span class="o">&gt;</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">Message</span><span class="o">-</span><span class="n">Id</span> <span class="n">header</span> <span class="n">values</span> <span class="n">to</span> <span class="n">keep</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">LMTP</span> <span class="n">dedupe</span> <span class="n">cache</span><span class="o">.</span>
    <span class="n">Subsequent</span> <span class="n">attempts</span> <span class="n">to</span> <span class="n">deliver</span> <span class="n">a</span> <span class="n">message</span> <span class="k">with</span> <span class="n">a</span> <span class="n">matching</span> <span class="n">Message</span><span class="o">-</span><span class="n">Id</span>
    <span class="n">to</span> <span class="n">the</span> <span class="n">same</span> <span class="n">mailbox</span> <span class="n">will</span> <span class="n">be</span> <span class="n">ignored</span><span class="o">.</span>  <span class="n">A</span> <span class="n">value</span> <span class="n">of</span> <span class="mi">0</span> <span class="n">disables</span> <span class="n">deduping</span><span class="o">.</span>
  <span class="o">&lt;/</span><span class="n">desc</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">attr</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>zimbraPrefMessageIdDedupingEnabled</strong></p>
<p>Manage deduplication at account or COS-level.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">attr</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;1198&quot;</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;zimbraPrefMessageIdDedupingEnabled&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;boolean&quot;</span> <span class="n">cardinality</span><span class="o">=</span><span class="s2">&quot;single&quot;</span> <span class="n">optionalIn</span><span class="o">=</span><span class="s2">&quot;account,cos&quot;</span> <span class="n">flags</span><span class="o">=</span><span class="s2">&quot;accountInherited&quot;</span>
 <span class="n">since</span><span class="o">=</span><span class="s2">&quot;8.0.0&quot;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">defaultCOSValue</span><span class="o">&gt;</span><span class="n">TRUE</span><span class="o">&lt;/</span><span class="n">defaultCOSValue</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">desc</span><span class="o">&gt;</span>
    <span class="n">Account</span><span class="o">-</span><span class="n">level</span> <span class="n">switch</span> <span class="n">that</span> <span class="n">enables</span> <span class="n">message</span> <span class="n">deduping</span><span class="o">.</span>  <span class="n">See</span> <span class="n">zimbraMessageIdDedupeCacheSize</span> <span class="k">for</span> <span class="n">more</span> <span class="n">details</span><span class="o">.</span>
  <span class="o">&lt;/</span><span class="n">desc</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">attr</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>zimbraMessageIdDedupeCacheTimeout</strong></p>
<p>Timeout for each entry in the dedupe cache.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">attr</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;1340&quot;</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;zimbraMessageIdDedupeCacheTimeout&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;duration&quot;</span> <span class="n">cardinality</span><span class="o">=</span><span class="s2">&quot;single&quot;</span> <span class="n">optionalIn</span><span class="o">=</span><span class="s2">&quot;globalConfig&quot;</span> <span class="n">since</span><span class="o">=</span><span class="s2">&quot;7.1.4&quot;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">globalConfigValue</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">&lt;/</span><span class="n">globalConfigValue</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">desc</span><span class="o">&gt;</span>
    <span class="n">Timeout</span> <span class="k">for</span> <span class="n">a</span> <span class="n">Message</span><span class="o">-</span><span class="n">Id</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">LMTP</span> <span class="n">dedupe</span> <span class="n">cache</span><span class="o">.</span> <span class="n">A</span> <span class="n">value</span> <span class="n">of</span> <span class="mi">0</span> <span class="n">indicates</span> <span class="n">no</span> <span class="n">timeout</span><span class="o">.</span>
    <span class="n">zimbraMessageIdDedupeCacheSize</span> <span class="n">limit</span> <span class="ow">is</span> <span class="n">ignored</span> <span class="n">when</span> <span class="n">this</span> <span class="ow">is</span> <span class="nb">set</span> <span class="n">to</span> <span class="n">a</span> <span class="n">non</span><span class="o">-</span><span class="n">zero</span> <span class="n">value</span><span class="o">.</span>
  <span class="o">&lt;/</span><span class="n">desc</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">attr</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>(older Zimbra versions might use different attributes or lack some of
them)</p>
</section>
</section>
<section id="item-deduplication-and-zextras-powerstore">
<span id="pws-item-deduplication-and-zextras-powerstore"></span><h3>Item Deduplication and Zextras Powerstore<a class="headerlink" href="#item-deduplication-and-zextras-powerstore" title="Permalink to this headline"></a></h3>
<p>The Zextras Powerstore features a <code class="docutils literal notranslate"><span class="pre">doDeduplicate</span></code> operation that
parses a target volume to find and deduplicate any duplicated item.</p>
<p>Doing so you will save even more disk space, as while Zimbra’s automatic
deduplication is bound to a limited cache, Zextras Powerstore’s
deduplication will also find and take care of multiple copies of the
same email regardless of any cache or timing.</p>
<p>Running the <code class="docutils literal notranslate"><span class="pre">doDeduplicate</span></code> operation is also highly suggested after a
migration or a large data import in order to optimize your storage
usage.</p>
<section id="running-a-volume-deduplication">
<span id="pws-running-a-volume-deduplication"></span><h4>Running a Volume Deduplication<a class="headerlink" href="#running-a-volume-deduplication" title="Permalink to this headline"></a></h4>
</section>
<section id="via-the-administration-zimlet">
<span id="pws-via-the-administration-zimlet"></span><h4>Via the Administration Zimlet<a class="headerlink" href="#via-the-administration-zimlet" title="Permalink to this headline"></a></h4>
<p>To run a volume deduplication via the Administration Zimlet, simply
click on the <em>Zextras Powerstore</em> tab, select the volume you wish to
deduplicate and press the <em>Deduplicate</em> button.</p>
</section>
<section id="via-the-cli">
<span id="pws-via-the-cli"></span><h4>Via the CLI<a class="headerlink" href="#via-the-cli" title="Permalink to this headline"></a></h4>
<p>To run a volume deduplication through the CLI, use the <code class="docutils literal notranslate"><span class="pre">doDeduplicate</span></code>
command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>zimbra@mailserver:~$ zxsuite powerstore doDeduplicate

command doDeduplicate requires more parameters

Syntax:
   zxsuite powerstore doDeduplicate {volume_name} [attr1 value1 [attr2 value2...

PARAMETER LIST

NAME              TYPE           EXPECTED VALUES    DEFAULT
volume_name(M)    String[,..]
dry_run(O)        Boolean        true|false         false

(M) == mandatory parameter, (O) == optional parameter

Usage example:

zxsuite powerstore dodeduplicate secondvolume
Starts a deduplication on volume secondvolume
</pre></div>
</div>
<p>To list all available volumes, you can use the <em>`zxsuite powerstore
getAllVolumes`</em> command.</p>
</section>
<section id="dodeduplicate-stats">
<span id="pws-dodeduplicate-stats"></span><h4><code class="docutils literal notranslate"><span class="pre">doDeduplicate</span></code> Stats<a class="headerlink" href="#dodeduplicate-stats" title="Permalink to this headline"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">doDeduplicate</span></code> operation is a valid target for the <code class="docutils literal notranslate"><span class="pre">monitor</span></code>
command, meaning that you can watch the command’s statistics while it’s
running through the <code class="docutils literal notranslate"><span class="pre">zxsuite</span> <span class="pre">powerstore</span> <span class="pre">monitor</span> <span class="pre">[operationID]</span></code>
command.</p>
<p><em>Sample Output</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Current</span> <span class="n">Pass</span> <span class="p">(</span><span class="n">Digest</span> <span class="n">Prefix</span><span class="p">):</span>  <span class="mi">63</span><span class="o">/</span><span class="mi">64</span>
 <span class="n">Checked</span> <span class="n">Mailboxes</span><span class="p">:</span>             <span class="mi">148</span><span class="o">/</span><span class="mi">148</span>
 <span class="n">Deduplicated</span><span class="o">/</span><span class="n">duplicated</span> <span class="n">Blobs</span><span class="p">:</span> <span class="mi">64868</span><span class="o">/</span><span class="mi">137089</span>
 <span class="n">Already</span> <span class="n">Deduplicated</span> <span class="n">Blobs</span><span class="p">:</span>    <span class="mi">71178</span>
 <span class="n">Skipped</span> <span class="n">Blobs</span><span class="p">:</span>                 <span class="mi">0</span>
 <span class="n">Invalid</span> <span class="n">Digests</span><span class="p">:</span>               <span class="mi">0</span>
 <span class="n">Total</span> <span class="n">Space</span> <span class="n">Saved</span><span class="p">:</span>             <span class="mf">21.88</span> <span class="n">GB</span>
</pre></div>
</div>
<ul class="simple">
<li><p><em>Current Pass (Digest Prefix)</em>: The <code class="docutils literal notranslate"><span class="pre">doDeduplicate</span></code> command will
analyze the BLOBS in groups based on the first character of their
digest (name).</p></li>
<li><p><em>Checked Mailboxes</em>: The number of mailboxes analyzed for the current
pass.</p></li>
<li><p><em>Deduplicated/duplicated Blobs</em>: Number of BLOBS deduplicated by the
current operation / Number of total duplicated items on the volume.</p></li>
<li><p><em>Already Deduplicated Blobs</em>: Number of deduplicated blobs on the
volume (duplicated blobs that have been deduplicated by a previous
run).</p></li>
<li><p><em>Skipped Blobs</em>: BLOBs that have not been analyzed, usually because
of a read error or missing file.</p></li>
<li><p><em>Invalid Digests</em>: BLOBs with a bad digest (name different from the
actual digest of the file).</p></li>
<li><p><em>Total Space Saved</em>: Amount of disk space freed by the doDeduplicate
operation.</p></li>
</ul>
<p>Looking at the sample output above we can see that:</p>
<ul class="simple">
<li><p>The operation is running the second to last pass on the last mailbox.</p></li>
<li><p>137089 duplicated BLOBs have been found, 71178 of which have already
been deduplicated previously.</p></li>
<li><p>The current operation deduplicated 64868 BLOBs, for a total disk
space saving of 21.88GB.</p></li>
</ul>
</section>
</section>
</section>
<section id="advanced-volume-operations">
<span id="pws-advanced-volume-operations"></span><h2>Advanced Volume Operations<a class="headerlink" href="#advanced-volume-operations" title="Permalink to this headline"></a></h2>
<section id="zextras-powerstore-more-than-meets-the-eye">
<span id="pws-zextras-powerstore-more-than-meets-the-eye"></span><h3>Zextras Powerstore: More than Meets the Eye<a class="headerlink" href="#zextras-powerstore-more-than-meets-the-eye" title="Permalink to this headline"></a></h3>
<p>At first sight, Zextras Powerstore seems to be strictly dedicated to
HSM. However, it also features some highly useful volume-related tools
that are not directly related to HSM.</p>
<p>Due to the implicit risks in volume management, these tools are only
available through the CLI.</p>
</section>
<section id="volume-operations-at-a-glance">
<span id="pws-volume-operations-at-a-glance"></span><h3>Volume Operations at a Glance<a class="headerlink" href="#volume-operations-at-a-glance" title="Permalink to this headline"></a></h3>
<p>The following volume operations are available:</p>
<p><strong>doCheckBlobs</strong>: Perform BLOB coherency checks on one or more volumes.</p>
<p><strong>doDeduplicate</strong>: Start Item Deduplication on a volume.</p>
<p><strong>doVolumeToVolumeMove</strong>: Move all items from one volume to another.</p>
<p><strong>getVolumeStats</strong>: Display information about a volume’s size and number
of thereby contained items/blobs.</p>
</section>
<section id="volume-operation-analysis">
<span id="pws-volume-operation-analysis"></span><h3>Volume Operation Analysis<a class="headerlink" href="#volume-operation-analysis" title="Permalink to this headline"></a></h3>
<section id="docheckblobs">
<span id="pws-docheckblobs"></span><h4>doCheckBlobs<a class="headerlink" href="#docheckblobs" title="Permalink to this headline"></a></h4>
<p>Usage</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>zimbra@mail:~$ zxsuite powerstore doCheckBlobs

command doCheckBlobs requires more parameters

Syntax:
   zxsuite powerstore doCheckBlobs {start} [attr1 value1 [attr2 value2...

PARAMETER LIST

NAME                           TYPE            EXPECTED VALUES    DEFAULT
action(M)                      String          start
volume_ids(O)                  Integer[,..]    1,3
mailbox_ids(O)                 Integer[,..]    2,9,27
missing_blobs_crosscheck(O)    Boolean         true|false         true
traced(O)                      Boolean         true|false         false

(M) == mandatory parameter, (O) == optional parameter

Usage example:

Usage examples:
zxsuite powerstore doCheckBlobs start: Perform a BLOB coherency check on all message volumes.

zxsuite powerstore doCheckBlobs start volume_ids 1,3: Perform a BLOB coherency check on volumes 1 and 3.

zxsuite powerstore doCheckBlobs start mailbox_ids 2,9,27: Perform a BLOB coherency check on mailboxes 2,9 and 27.

zxsuite powerstore doCheckBlobs start missing_blobs_crosscheck false: Perform a BLOB coherency check without checking on other volumes.

zxsuite powerstore doCheckBlobs start traced true: Perform a BLOB coherency check, logging even the correct checked items.
</pre></div>
</div>
<p>Description and Tips</p>
<p>The doCheckBlobs operation can be used to run BLOB coherency checks on
volumes and mailboxes. This can be useful when experiencing issues
related to broken or unviewable items, which are often caused because
either Zimbra cannot find or access the BLOB file related to an item or
there is an issue with the BLOB content itself.</p>
<p>Specifically, the following checks are made:</p>
<ul class="simple">
<li><p>DB-to-BLOB coherency: For every Item entry in Zimbra’s DB, check
whether the appropriate BLOB file exists.</p></li>
<li><p>BLOB-to-DB coherency: For every BLOB file in a volume/mailbox, check
whether the appropriate DB data exists.</p></li>
<li><p>Filename coherency: Checks the coherency of each BLOB’s filename with
its content (as BLOBs are named after their file’s SHA hash).</p></li>
<li><p>Size coherency: For every BLOB file in a volume/mailbox, checks
whether the BLOB file’s size is coherent with the expected size
(stored in the DB).</p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The old <code class="docutils literal notranslate"><span class="pre">zmblobchk</span></code> command is deprecated and
replaced by <code class="docutils literal notranslate"><span class="pre">zxsuite</span> <span class="pre">powerstore</span> <span class="pre">doCheckBlobs</span></code> on all
infrastructures using Zextras Powerstore module.</p>
</div>
</section>
<section id="dodeduplicate">
<span id="pws-dodeduplicate"></span><h4>doDeduplicate<a class="headerlink" href="#dodeduplicate" title="Permalink to this headline"></a></h4>
<p>Usage</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>zimbra@mail:~$ zxsuite powerstore doDeduplicate

command doDeduplicate requires more parameters

Syntax:
   zxsuite powerstore doDeduplicate {volume_name} [attr1 value1 [attr2 value2...

PARAMETER LIST

NAME              TYPE           EXPECTED VALUES    DEFAULT
volume_name(M)    String[,..]
dry_run(O)        Boolean        true|false         false

(M) == mandatory parameter, (O) == optional parameter

Usage example:

zxsuite powerstore dodeduplicate secondvolume
Starts a deduplication on volume secondvolume
</pre></div>
</div>
</section>
<section id="dovolumetovolumemove">
<span id="pws-dovolumetovolumemove"></span><h4>doVolumeToVolumeMove<a class="headerlink" href="#dovolumetovolumemove" title="Permalink to this headline"></a></h4>
<p><strong>Usage</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>zimbra@mail:~$ zxsuite powerstore doVolumeToVolumeMove

command doVolumeToVolumeMove requires more parameters

Syntax:
   zxsuite powerstore doVolumeToVolumeMove {source_volume_name} {destination_volume_name}

PARAMETER LIST

NAME                          TYPE
source_volume_name(M)         String
destination_volume_name(M)    String

(M) == mandatory parameter, (O) == optional parameter

Usage example:

zxsuite powerstore doVolumeToVolumeMove sourceVolume destVolume
Moves the whole sourceVolume to destVolume
</pre></div>
</div>
<p><strong>Description and Tips</strong></p>
<p>This command can prove highly useful in all situations where you need to
stop using a volume, such as:</p>
<ul class="simple">
<li><p>Decommissioning old hardware: If you want to get rid of an old disk
in a physical server, create new volumes on other/newer disks and
move your data there.</p></li>
<li><p>Fixing <em>little mistakes</em>: If you accidentally create a new volume in
the wrong place, move the data to another volume.</p></li>
<li><p>Centralize volumes: Centralize and move volumes as you please, for
example, if you redesigned your storage infrastructure or you are
tidying up your Zimbra volumes.</p></li>
</ul>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Starting from version 3.0.10, Zextras Powerstore can also
move “Index” volumes.</p>
</div>
</section>
<section id="getvolumestats">
<span id="pws-getvolumestats"></span><h4>getVolumeStats<a class="headerlink" href="#getvolumestats" title="Permalink to this headline"></a></h4>
<p><strong>Usage</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>zimbra@mail:~$ zxsuite powerstore getVolumeStats

command getVolumeStats requires more parameters

Syntax:
   zxsuite powerstore getVolumeStats {volume_id} [attr1 value1 [attr2 value2...

PARAMETER LIST

NAME                   TYPE       EXPECTED VALUES    DEFAULT
volume_id(M)           Integer
show_volume_size(O)    Boolean    true|false         false
show_blob_num(O)       Boolean    true|false         false

(M) == mandatory parameter, (O) == optional parameter

Usage example:

**BE CAREFUL** show_volume_size and show_blob_num options are IO intensive and thus disabled by default

zxsuite powerstore getVolumeStats 2
Shows stats for the volume with ID equal to 2
</pre></div>
</div>
<p><strong>Description and Tips</strong></p>
<p>This command provides the following information about a volume:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>id</p></td>
<td><p>The ID of the volume</p></td>
</tr>
<tr class="row-odd"><td><p>name</p></td>
<td><p>The Name of the volume</p></td>
</tr>
<tr class="row-even"><td><p>path</p></td>
<td><p>The Path of the volume</p></td>
</tr>
<tr class="row-odd"><td><p>compressed</p></td>
<td><p>Compression enabled/disabled</p></td>
</tr>
<tr class="row-even"><td><p>threshold</p></td>
<td><p>Compression threshold (in bytes)</p></td>
</tr>
<tr class="row-odd"><td><p>lastMoveOutcome</p></td>
<td><p>Exit status of the latest doMoveBlobs
operation</p></td>
</tr>
<tr class="row-even"><td><p>lastMoveTimestamp</p></td>
<td><p>End timestamp of the latest doMoveBlobs
operation</p></td>
</tr>
<tr class="row-odd"><td><p>lastMoveDuration</p></td>
<td><p>Duration of the last doMoveBlobs operation</p></td>
</tr>
<tr class="row-even"><td><p>lastItemMovedCount</p></td>
<td><p>Number of items moved to the current
secondary volume during the latest doMoveBlobs operation</p></td>
</tr>
<tr class="row-odd"><td><p>bytesSaved</p></td>
<td><p>Total amount of disk space freed up thanks to
deduplication and compression</p></td>
</tr>
<tr class="row-even"><td><p>bytesSavedLast</p></td>
<td><p>Amount of disk space freed up thanks to
deduplication and compression during the latest doMoveBlobs
operation</p></td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">show_volume_size</span></code> and <code class="docutils literal notranslate"><span class="pre">show_blob_num</span></code> options will add the
following data to the output:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>show_volume_size</p></td>
<td><p>totSize</p></td>
<td><p>Total disk space used</p></td>
</tr>
<tr class="row-odd"><td><p>show_blob_num</p></td>
<td><p>blobNumber</p></td>
<td><p>Number of BLOB files</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="moving-mailboxes-between-mailstores">
<span id="pws-moving-mailboxes-between-mailstores"></span><h2>Moving Mailboxes Between Mailstores<a class="headerlink" href="#moving-mailboxes-between-mailstores" title="Permalink to this headline"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">doMailboxMove</span></code> command allows you to move a single mailbox or all
accounts from a given domain, from one mailbox server to another within
the same Zimbra infrastructure.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If the Zextras Powerstore module is installed and
enabled, this command replaces the old <code class="docutils literal notranslate"><span class="pre">zmmboxmove</span></code> and
<code class="docutils literal notranslate"><span class="pre">zmmailboxmove</span></code> commands. Using any of the legacy commands will
return an error and won’t move any data.</p>
</div>
<p><strong>Syntax</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Syntax</span><span class="p">:</span>
   <span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doMailboxMove</span> <span class="p">{</span><span class="n">destinationHost</span><span class="p">}</span> <span class="p">[</span><span class="n">attr1</span> <span class="n">value1</span> <span class="p">[</span><span class="n">attr2</span> <span class="n">value2</span><span class="o">...</span><span class="p">]]</span>

<span class="n">PARAMETER</span> <span class="n">LIST</span>

<span class="n">NAME</span>                       <span class="n">TYPE</span>             <span class="n">EXPECTED</span> <span class="n">VALUES</span>                                      <span class="n">DEFAULT</span>
<span class="n">destinationHost</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>         <span class="n">String</span>
<span class="n">accounts</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                <span class="n">String</span><span class="p">[,</span><span class="o">..</span><span class="p">]</span>      <span class="n">john</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span><span class="p">,</span><span class="n">smith</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span><span class="p">[,</span><span class="o">...</span><span class="p">]</span>
<span class="n">domains</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                 <span class="n">String</span><span class="p">[,</span><span class="o">..</span><span class="p">]</span>      <span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">,</span><span class="n">test</span><span class="o">.</span><span class="n">com</span><span class="p">[,</span><span class="o">...</span><span class="p">]</span>
<span class="n">input_file</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>              <span class="n">String</span>
<span class="n">stages</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                  <span class="n">String</span><span class="p">[,</span><span class="o">..</span><span class="p">]</span>      <span class="n">blobs</span><span class="o">|</span><span class="n">backup</span><span class="o">|</span><span class="n">data</span><span class="o">|</span><span class="n">account</span> <span class="n">data</span><span class="o">=</span><span class="n">blobs</span><span class="o">+</span><span class="n">backup</span><span class="p">[,</span><span class="o">...</span><span class="p">]</span>    <span class="n">blobs</span><span class="p">,</span><span class="n">backup</span><span class="p">,</span><span class="n">account</span>
<span class="n">compress</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                <span class="n">Boolean</span>          <span class="n">true</span><span class="o">|</span><span class="n">false</span>                                           <span class="n">true</span>
<span class="n">checkDigest</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>             <span class="n">Boolean</span>          <span class="k">if</span> <span class="n">false</span> <span class="n">skip</span> <span class="n">digest</span> <span class="n">calculation</span> <span class="ow">and</span> <span class="n">check</span>           <span class="n">true</span>
<span class="n">overwrite</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>               <span class="n">Boolean</span>          <span class="n">true</span><span class="o">|</span><span class="n">false</span>                                           <span class="n">false</span>
<span class="n">threads</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                 <span class="n">Integer</span>                                                               <span class="mi">1</span>
<span class="n">hsm</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>                     <span class="n">Boolean</span>          <span class="n">true</span><span class="o">|</span><span class="n">false</span>                                           <span class="n">true</span>
<span class="n">notifications</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>           <span class="n">Email</span> <span class="n">Address</span>
<span class="n">ignore_partial</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>          <span class="n">Boolean</span>          <span class="n">true</span><span class="o">|</span><span class="n">false</span>                                           <span class="n">false</span>
<span class="n">drop_network_backup</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>     <span class="n">Boolean</span>          <span class="n">true</span><span class="o">|</span><span class="n">false</span>                                           <span class="n">false</span>
<span class="n">read_error_threshold</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>    <span class="n">Integer</span>

<span class="p">(</span><span class="n">M</span><span class="p">)</span> <span class="o">==</span> <span class="n">mandatory</span> <span class="n">parameter</span><span class="p">,</span> <span class="p">(</span><span class="n">O</span><span class="p">)</span> <span class="o">==</span> <span class="n">optional</span> <span class="n">parameter</span>

<span class="n">Usage</span> <span class="n">example</span><span class="p">:</span>

<span class="n">zxsuite</span> <span class="n">powerstore</span> <span class="n">doMailboxMove</span> <span class="n">mail2</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="n">accounts</span> <span class="n">john</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span> <span class="n">stages</span> <span class="n">data</span><span class="p">,</span><span class="n">account</span>
<span class="n">Move</span> <span class="n">mailbox</span> <span class="k">for</span> <span class="n">account</span> <span class="n">john</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span> <span class="n">to</span> <span class="n">mail2</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="n">host</span>
</pre></div>
</div>
<p>Parameter List</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>destinationHost(M)</p></td>
<td><p>The host where the mailbox must
be moved to.</p></td>
</tr>
<tr class="row-even"><td><p>accounts(O)</p></td>
<td><p>Comma separated list of
mailbox(es) to move. Can be
combined with the “domains”
option.</p></td>
</tr>
<tr class="row-odd"><td><p>domains(O)</p></td>
<td><p>Comma separated list of domain(s)
to move. Can be combined with the
“accounts” option.</p></td>
</tr>
<tr class="row-even"><td><p>input_file(O)</p></td>
<td><p>File containing the list of
mailboxes to move, one per line.</p></td>
</tr>
<tr class="row-odd"><td><p>stages(O)</p></td>
<td><p>The stages of the move to perform
among blobs, backup, data,
account. The “Data” stage will
move both blobs and backup, while
the “account” stage will
effectively move the mailbox
information.</p></td>
</tr>
<tr class="row-even"><td><p>compress(O)</p></td>
<td><p>Whether to compress the moved
blobs on the destination host or
not.</p></td>
</tr>
<tr class="row-odd"><td><p>checkDigest(O)</p></td>
<td><p>Whether to check item digests
during the move or not. Safer but
slower.</p></td>
</tr>
<tr class="row-even"><td><p>overwrite(O)</p></td>
<td><p>Whether to overwrite previously
moved items for the same mailbox.</p></td>
</tr>
<tr class="row-odd"><td><p>threads(O)</p></td>
<td><p>Number of threads to use for the
move. Higher threads mean faster
moves but with more impact on the
system’s performances.</p></td>
</tr>
<tr class="row-even"><td><p>hsm(O)</p></td>
<td><p>Whether to apply the HSM policies
on the destination host when
moving the blobs.</p></td>
</tr>
<tr class="row-odd"><td><p>notifications(O)</p></td>
<td><p>Comma separated list of email
addresses to notify about the
outcome of the operation.</p></td>
</tr>
<tr class="row-even"><td><p>ignore_partial(O)</p></td>
<td><p>Ignore previous move attempts.</p></td>
</tr>
<tr class="row-odd"><td><p>drop_network_backup(O)</p></td>
<td><p>Delete Legacy Backup data during
the move</p></td>
</tr>
<tr class="row-even"><td><p>read_error_threshold(O)</p></td>
<td><p>Maximum amount of read I/O errors
to allow before stopping the
operation.</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>When moving a domain, each account from the current server is
enumerated and moved sequentially.</p></li>
<li><p>The mailbox is set to maintenance mode only during the ‘account’
stage.</p></li>
<li><p>The move will be stopped if 5% or more write errors are encountered
on items being moved.</p>
<ul>
<li><p>When multiple mailboxes are moved within the same operation, the
error count is global and not per-mailbox.</p></li>
</ul>
</li>
<li><p>Moves will not start if the destination server does not have enough
space available to host the mailbox.</p>
<ul>
<li><p>When a single operation is used to move multiple mailboxes, the
space check will be performed before moving each mailbox.</p></li>
</ul>
</li>
<li><p>All data is moved at a low-level and will not be changed except for
the mailbox id.</p></li>
<li><p>The operation is made up of 3 stages: blobs|backup|account. For each
mailbox:</p>
<ul>
<li><p>blobs: All blobs are copied from the source server to the
destination server.</p></li>
<li><p>backup: All backup entries are copied from the source server to
the destination server.</p></li>
<li><p>account: All database entries are moved as-is and LDAP entries are
updated, effectively moving the mailbox.</p></li>
</ul>
</li>
<li><p>All of the stages are executed sequentially.</p></li>
<li><p>On the reindex stage’s completion, a new HSM operation is submitted
to the destination server, if not specified otherwise.</p></li>
<li><p>All volumes’ compression options are taken.</p></li>
<li><p>The MailboxMove operation can be executed if and only if no others
operations are running on the source server.</p></li>
<li><p>A move will not start if the destination server does not have enough
space available or the user just belongs to the destination host.</p></li>
<li><p>By default, items are placed in the Current Primary volume of the
destination server.</p>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">hsm</span> <span class="pre">true</span></code> option can be used to apply the HSM policies of
the destination server after a mailbox is successfully moved.</p></li>
</ul>
</li>
<li><p>If, for any reason, the move stops before it is completed the
original account will still be active and the appropriate notificaton
will be issued.</p></li>
<li><p>Should the mailboxd crash during move, the “Operation Interrupted”
notification is issued as for all operations, warning the users about
the interrupted operation.</p></li>
<li><p>Index information are moved during the ‘account’ stage, so no manual
reindexing is needed nor one will be triggered automatically.</p></li>
<li><p>When moving accounts from source to destination server, <em>by default</em>
HSM is carried out only on the moved accounts, right after they have
been successfully moved.</p>
<ul>
<li><p>The admin can however choose to defer the HSM at a later point.</p></li>
</ul>
</li>
<li><p>If for any reason the second stage is not successful, HSM is not
executed.</p></li>
</ul>
</section>
<section id="zextras-powerstore-attachment-indexing">
<span id="pws-zextras-powerstore-attachment-indexing"></span><h2>Zextras Powerstore Attachment Indexing<a class="headerlink" href="#zextras-powerstore-attachment-indexing" title="Permalink to this headline"></a></h2>
<section id="how-indexing-works">
<span id="pws-how-indexing-works"></span><h3>How Indexing Works<a class="headerlink" href="#how-indexing-works" title="Permalink to this headline"></a></h3>
<p>Zextras Powerstore has a new <a class="reference external" href="#externalcontentextractor">External Content
Extractor</a> to index attachment contents.
This way the resources do not have to dedicate time reading the
attachments.</p>
<p>The external content extractor works together with Zimbra’s default
engine. The main Zimbra indexing process analyzes the contents of an
item, splitting it into several parts based on the MIME parts of the
object. Next, Zimbra handles the indexing of <em>known</em>
contents — plaintext — and passes the datastream on to the Zextras
Powerstore handlers for all other content.</p>
<p>The indexing engine includes an indexing cache that speeds up the
indexing process of any content that has already been analyzed.
Datastreams over 10Kb are cached by default, and the cache hold 10000
entries, while smaller datastreams are not cached as the cache benefits
only apply to large datastreams.</p>
</section>
<section id="indexed-formats">
<span id="pws-indexed-formats"></span><h3>Indexed Formats<a class="headerlink" href="#indexed-formats" title="Permalink to this headline"></a></h3>
<section id="web">
<span id="pws-web"></span><h4>Web<a class="headerlink" href="#web" title="Permalink to this headline"></a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Parser</p></th>
<th class="head"><p>Content-type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">asp</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">HtmlParser</span></code></p></td>
<td><p>application/x-asp</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">htm</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">HtmlParser</span></code></p></td>
<td><p>application/xhtml+xml</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">html</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">HtmlParser</span></code></p></td>
<td><p>application/xhtml+xml, text/html</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">shtml</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">HtmlParser</span></code></p></td>
<td><p>application/xhtml+xml</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">xhtml</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">HtmlParser</span></code></p></td>
<td><p>application/xhtml+xml</p></td>
</tr>
</tbody>
</table>
</section>
<section id="documents">
<span id="pws-documents"></span><h4>Documents<a class="headerlink" href="#documents" title="Permalink to this headline"></a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Parser</p></th>
<th class="head"><p>Content-type</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rtf</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">RTFParser</span></code></p></td>
<td><p>application/rtf</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pdf</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PDFParser</span></code></p></td>
<td><p>application/pdf</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pub</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OfficeParser</span></code></p></td>
<td><p>application/x-mspublisher</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">xls</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OfficeParser</span></code></p></td>
<td><p>application/vnd.ms-excel</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">xlt</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OfficeParser</span></code></p></td>
<td><p>application/vnd.ms-excel</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">xlw</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OfficeParser</span></code></p></td>
<td><p>application/vnd.ms-excel</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ppt</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OfficeParser</span></code></p></td>
<td><p>application/vnd.ms-powerpoint</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pps</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OfficeParser</span></code></p></td>
<td><p>application/vnd.ms-powerpoint</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mpp</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OfficeParser</span></code></p></td>
<td><p>application/vnd.ms-project</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">doc</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OfficeParser</span></code></p></td>
<td><p>application/msword</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dot</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OfficeParser</span></code></p></td>
<td><p>application/msword</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">msg</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OfficeParser</span></code></p></td>
<td><p>application/vnd.ms-outlook</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">vsd</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OfficeParser</span></code></p></td>
<td><p>application/vnd.visio</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">vst</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OfficeParser</span></code></p></td>
<td><p>application/vnd.visio</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">vss</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OfficeParser</span></code></p></td>
<td><p>application/vnd.visio</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">vsw</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OfficeParser</span></code></p></td>
<td><p>application/vnd.visio</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">xlsm</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OOXMLParser</span></code></p></td>
<td><p>application/vnd.ms-excel.sheet.macroenabled.12</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pptm</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OOXMLParser</span></code></p></td>
<td><p>application/vnd.ms-powerpoint.presentation.macroenabled.12</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">xltx</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OOXMLParser</span></code></p></td>
<td><p>application/vnd.openxmlformats-officedocument.spreadsheetml.template</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">docx</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OOXMLParser</span></code></p></td>
<td><p>application/vnd.openxmlformats-officedocument.wordprocessingml.document</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">potx</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OOXMLParser</span></code></p></td>
<td><p>application/vnd.openxmlformats-officedocument.presentationml.template</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">xlsx</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OOXMLParser</span></code></p></td>
<td><p>application/vnd.openxmlformats-officedocument.spreadsheetml.sheet</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pptx</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OOXMLParser</span></code></p></td>
<td><p>application/vnd.openxmlformats-officedocument.presentationml.presentation</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">xlam</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OOXMLParser</span></code></p></td>
<td><p>application/vnd.ms-excel.addin.macroenabled.12</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">docm</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OOXMLParser</span></code></p></td>
<td><p>application/vnd.ms-word.document.macroenabled.12</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">xltm</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OOXMLParser</span></code></p></td>
<td><p>application/vnd.ms-excel.template.macroenabled.12</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dotx</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OOXMLParser</span></code></p></td>
<td><p>application/vnd.openxmlformats-officedocument.wordprocessingml.template</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ppsm</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OOXMLParser</span></code></p></td>
<td><p>application/vnd.ms-powerpoint.slideshow.macroenabled.12</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ppam</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OOXMLParser</span></code></p></td>
<td><p>application/vnd.ms-powerpoint.addin.macroenabled.12</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dotm</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OOXMLParser</span></code></p></td>
<td><p>application/vnd.ms-word.template.macroenabled.12</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ppsx</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OOXMLParser</span></code></p></td>
<td><p>application/vnd.openxmlformats-officedocument.presentationml.slideshow</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">odt</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OpenDocumentParser</span></code></p></td>
<td><p>application/vnd.oasis.opendocument.text</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ods</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OpenDocumentParser</span></code></p></td>
<td><p>application/vnd.oasis.opendocument.spreadsheet</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">odp</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OpenDocumentParser</span></code></p></td>
<td><p>application/vnd.oasis.opendocument.presentation</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">odg</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OpenDocumentParser</span></code></p></td>
<td><p>application/vnd.oasis.opendocument.graphics</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">odc</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OpenDocumentParser</span></code></p></td>
<td><p>application/vnd.oasis.opendocument.chart</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">odf</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OpenDocumentParser</span></code></p></td>
<td><p>application/vnd.oasis.opendocument.formula</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">odi</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OpenDocumentParser</span></code></p></td>
<td><p>application/vnd.oasis.opendocument.image</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">odm</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OpenDocumentParser</span></code></p></td>
<td><p>application/vnd.oasis.opendocument.text-master</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ott</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OpenDocumentParser</span></code></p></td>
<td><p>application/vnd.oasis.opendocument.text-template</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ots</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OpenDocumentParser</span></code></p></td>
<td><p>application/vnd.oasis.opendocument.spreadsheet-template</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">otp</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OpenDocumentParser</span></code></p></td>
<td><p>application/vnd.oasis.opendocument.presentation-template</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">otg</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OpenDocumentParser</span></code></p></td>
<td><p>application/vnd.oasis.opendocument.graphics-template</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">otc</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OpenDocumentParser</span></code></p></td>
<td><p>application/vnd.oasis.opendocument.chart-template</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">otf</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OpenDocumentParser</span></code></p></td>
<td><p>application/vnd.oasis.opendocument.formula-template</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">oti</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OpenDocumentParser</span></code></p></td>
<td><p>application/vnd.oasis.opendocument.image-template</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">oth</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OpenDocumentParser</span></code></p></td>
<td><p>application/vnd.oasis.opendocument.text-web</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sxw</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">OpenDocumentParser</span></code></p></td>
<td><p>application/vnd.sun.xml.writer</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="packages-and-archives">
<span id="pws-packages-and-archives"></span><h4>Packages and Archives<a class="headerlink" href="#packages-and-archives" title="Permalink to this headline"></a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Parser</p></th>
<th class="head"><p>Content-type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">z</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CompressorParser</span></code></p></td>
<td><p>application/x-compress</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bz</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CompressorParser</span></code></p></td>
<td><p>application/x-bzip</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">boz</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CompressorParser</span></code></p></td>
<td><p>application/x-bzip2</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bz2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CompressorParser</span></code></p></td>
<td><p>application/x-bzip2</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">gz</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CompressorParser</span></code></p></td>
<td><p>application/gzip</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">gz</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CompressorParser</span></code></p></td>
<td><p>application/x-gzip</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">gzip</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CompressorParser</span></code></p></td>
<td><p>application/x-gzip</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">xz</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CompressorParser</span></code></p></td>
<td><p>application/x-xz</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tar</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PackageParser</span></code></p></td>
<td><p>application/x-tar</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">jar</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PackageParser</span></code></p></td>
<td><p>application/java-archive</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">7z</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PackageParser</span></code></p></td>
<td><p>application/x-7z-compressed</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cpio</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PackageParser</span></code></p></td>
<td><p>application/x-cpio</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">zip</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PackageParser</span></code></p></td>
<td><p>application/zip</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">rar</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">RarParser</span></code></p></td>
<td><p>application/x-rar-compressed</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">txt</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TXTParser</span></code></p></td>
<td><p>text/plain</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="parser-controls">
<span id="pws-parser-controls"></span><h3>Parser Controls<a class="headerlink" href="#parser-controls" title="Permalink to this headline"></a></h3>
<p>Parsers can be turned on or off by changing the related value to
<code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code> via the <code class="docutils literal notranslate"><span class="pre">zxsuite</span> <span class="pre">config</span></code> CLI command.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Parsers</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>pdfParsingEnabled</p></td>
<td><p>PDFParser</p></td>
</tr>
<tr class="row-odd"><td><p>odfParsingEnabled</p></td>
<td><p>OpenDocumentParser</p></td>
</tr>
<tr class="row-even"><td><p>archivesParsingEnabled</p></td>
<td><p>CompressorParser, PackageParser, RarParser</p></td>
</tr>
<tr class="row-odd"><td><p>microsoftParsingEnabled</p></td>
<td><p>OfficeParser, OOXMLParser, OldExcelParser</p></td>
</tr>
<tr class="row-even"><td><p>rtfParsingEnabled</p></td>
<td><p>RTFParser</p></td>
</tr>
</tbody>
</table>
<p>e.g. to disable PDF parsing run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>zxsuite config server <span class="nb">set</span> server.example.com attribute pdfParsingEnabled value <span class="nb">false</span>
</pre></div>
</div>
<p>By default, all parsers are active.</p>
</section>
</section>
<section id="pws-external-content-extractor">
<span id="id4"></span><h2>External Content Extractor<a class="headerlink" href="#pws-external-content-extractor" title="Permalink to this headline"></a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This feature is currently in beta, usage in production
environment is not recommended.</p>
</div>
<p>The external content extractor detects and extracts metadata and text
from over a thousand different file types (such as PPT, XLS, and PDF).
All of these file types can be parsed through a single interface, making
it useful for search engine indexing, content analysis, translation, and
much more.</p>
<section id="why-use-tika-server-as-content-extractor">
<span id="pws-why-use-tika-server-as-content-extractor"></span><h3>Why use Tika Server as Content Extractor?<a class="headerlink" href="#why-use-tika-server-as-content-extractor" title="Permalink to this headline"></a></h3>
<p>Zextras uses a Tika library that shares the same Java Virtual Machine
(JVM) as the mailbox. With the Tika server you can you can have multiple
Tika servers indexing the content separated from the mailbox. In case of
a crash of a Tika server, the mailbox JVM remains unaffected.</p>
</section>
<section id="switching-to-the-tika-server">
<span id="pws-switching-to-the-tika-server"></span><h3>Switching to the Tika Server<a class="headerlink" href="#switching-to-the-tika-server" title="Permalink to this headline"></a></h3>
<p>You can run Tika server as a <a class="reference external" href="https://github.com/apache/tika-docker">docker
container</a>, on the same server
as the mailbox; or on separate servers accessible by Zimbra.</p>
<section id="add-a-tika-server">
<span id="pws-add-a-tika-server"></span><h4>Add a Tika Server<a class="headerlink" href="#add-a-tika-server" title="Permalink to this headline"></a></h4>
<p>You can add a Tika server by running the following command on the
Command Line Interface (CLI).</p>
<p>Format</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>zxsuite powerstore Indexing content-extraction-tool add <span class="o">{</span>endpoint<span class="o">}</span> <span class="o">[</span>attr1 value1 <span class="o">[</span>attr2 value2...<span class="o">]]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PARAMETER</span> <span class="n">LIST</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">NAME</span>           <span class="n">TYPE</span>       <span class="n">EXPECTED</span> <span class="n">VALUES</span>
<span class="n">endpoint</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>    <span class="n">String</span>
<span class="n">server</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>      <span class="n">String</span>
<span class="k">global</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>      <span class="n">Boolean</span>    <span class="n">true</span><span class="o">|</span><span class="n">false</span>
</pre></div>
</div>
<p>Example</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>zxsuite powerstore Indexing content-extraction-tool add http://test.example.com:9997/tika
</pre></div>
</div>
<dl class="simple">
<dt>Explanation</dt><dd><p>Zextras adds an endpoint with address <code class="docutils literal notranslate"><span class="pre">http://test.example.com</span></code>
listening on port <code class="docutils literal notranslate"><span class="pre">9997</span></code></p>
</dd>
<dt>Add tika endpoint for this mailbox store</dt><dd><p>Run the below command, as a zimbra user, from the same server as the
mailbox</p>
</dd>
</dl>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>zxsuite powerstore Indexing content-extraction-tool add http://test.example.com:9998/tika
</pre></div>
</div>
<dl class="simple">
<dt>Add tika endpoint for mailbox store store1.example.com</dt><dd><p>Run the below command, as a zimbra user, from the same server as the
mailbox</p>
</dd>
</dl>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>zxsuite powerstore Indexing content-extraction-tool add http://test.example.com/tika server store1.example.com
</pre></div>
</div>
<p>Add tika endpoint for all mailbox stores (applies only to mailbox stores that don’t have any endpoint specified)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>zxsuite powerstore Indexing content-extraction-tool add http://test.example.com:9998/tika global <span class="nb">true</span>
</pre></div>
</div>
</section>
<section id="list-tika-servers">
<span id="pws-list-tika-servers"></span><h4>List Tika Servers<a class="headerlink" href="#list-tika-servers" title="Permalink to this headline"></a></h4>
<p>You can list all Tika servers by running the following command on the
Command Line Interface (CLI).</p>
<p>Command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>zxsuite powerstore Indexing content-extraction-tool list
</pre></div>
</div>
<p>Sample Output</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>content-extraction-endpoints
                http://test.example.com:9998/tika
</pre></div>
</div>
<dl class="simple">
<dt>Explanation</dt><dd><p>Zextras lists all the running Tika servers with their addresses and
the ports on which they are listening.</p>
</dd>
</dl>
</section>
<section id="remove-a-tika-server">
<span id="pws-remove-a-tika-server"></span><h4>Remove a Tika Server<a class="headerlink" href="#remove-a-tika-server" title="Permalink to this headline"></a></h4>
<p>You can remove a previously added Tika server by running the following
command on the Command Line Interface (CLI).</p>
<p>Format</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>zxsuite powerstore Indexing content-extraction-tool remove <span class="o">{</span>endpoint<span class="o">}</span> <span class="o">[</span>attr1 value1 <span class="o">[</span>attr2 value2...<span class="o">]]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PARAMETER</span> <span class="n">LIST</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">NAME</span>           <span class="n">TYPE</span>       <span class="n">EXPECTED</span> <span class="n">VALUES</span>
<span class="n">endpoint</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>    <span class="n">String</span>
<span class="n">server</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>      <span class="n">String</span>
<span class="k">global</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>      <span class="n">Boolean</span>    <span class="n">true</span><span class="o">|</span><span class="n">false</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">M</span><span class="p">)</span> <span class="o">==</span> <span class="n">mandatory</span> <span class="n">parameter</span><span class="p">,</span> <span class="p">(</span><span class="n">O</span><span class="p">)</span> <span class="o">==</span> <span class="n">optional</span> <span class="n">parameter</span>
</pre></div>
</div>
<p>Example</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>zxsuite powerstore Indexing content-extraction-tool remove http://test.example.com:9997/tika
</pre></div>
</div>
<dl class="simple">
<dt>Explanation</dt><dd><p>Zextras removes the server with address <code class="docutils literal notranslate"><span class="pre">http://test.example.com</span></code>
listening on port <code class="docutils literal notranslate"><span class="pre">9997</span></code></p>
</dd>
</dl>
</section>
</section>
<section id="is-the-tika-server-running">
<span id="pws-is-the-tika-server-running"></span><h3>Is the Tika Server Running?<a class="headerlink" href="#is-the-tika-server-running" title="Permalink to this headline"></a></h3>
<p>You can use the following methods to check if the Tika Server is
running.</p>
<dl class="simple">
<dt>Graphical User Interface (GUI)</dt><dd><ol class="arabic simple">
<li><p>Send an email with a new attachment.</p></li>
<li><p>Search for the attachment.</p></li>
</ol>
</dd>
<dt>Command Line Interface (CLI)</dt><dd><ol class="arabic simple">
<li><p>Navigate to <code class="docutils literal notranslate"><span class="pre">/opt/zimbra/log</span></code>.</p></li>
<li><p>View the contents of <code class="docutils literal notranslate"><span class="pre">mailbox.log</span></code>.</p>
<ul class="simple">
<li><p>You can use <code class="docutils literal notranslate"><span class="pre">tail</span> <span class="pre">-f</span></code>.</p></li>
</ul>
</li>
</ol>
</dd>
</dl>
<p>Sample Output</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">2021</span>-07-07 <span class="m">15</span>:24:25,444 INFO <span class="o">[</span>qtp413601558-41832:https://mail.example.com/service/soap/SearchRequest<span class="o">]</span> <span class="o">[</span><span class="nv">name</span><span class="o">=</span>user@mail.example.com<span class="p">;</span><span class="nv">mid</span><span class="o">=</span><span class="m">136</span><span class="p">;</span><span class="nv">oip</span><span class="o">=</span><span class="m">192</span>.168.0.10<span class="p">;</span><span class="nv">port</span><span class="o">=</span><span class="m">33008</span><span class="p">;</span><span class="nv">ua</span><span class="o">=</span>ZimbraWebClient - FF89 <span class="o">(</span>Linux<span class="o">)</span>/8.8.15_GA_4007<span class="p">;</span><span class="nv">soapId</span><span class="o">=</span>3084e510<span class="p">;</span><span class="o">]</span> mailbox - Using http://test.example.com:9997/tika <span class="k">for</span> content extraction
</pre></div>
</div>
</section>
</section>
<section id="zextras-powerstore-cli">
<span id="id5"></span><h2>Zextras Powerstore CLI<a class="headerlink" href="#zextras-powerstore-cli" title="Permalink to this headline"></a></h2>
<p>This section contains the index of all <code class="docutils literal notranslate"><span class="pre">zxsuite</span> <span class="pre">powerstore</span></code> commands.
Full reference can be found in <a class="reference external" href="./cli.xml#_zxpowerstore_cli_commands">the dedicated
section</a>.</p>
<p><a class="reference external" href="./cli.xml#core_testS3Connection">testS3Connection</a> |
<a class="reference external" href="./cli.xml#powerstore_doCheckBlobs">doCheckBlobs</a> | <a class="reference external" href="./cli.xml#powerstore_doCreateVolume_Alibaba">doCreateVolume
Alibaba</a> |
<a class="reference external" href="./cli.xml#powerstore_doCreateVolume_Centralized">doCreateVolume
Centralized</a> |
<a class="reference external" href="./cli.xml#powerstore_doCreateVolume_Ceph">doCreateVolume Ceph</a> |
<a class="reference external" href="./cli.xml#powerstore_doCreateVolume_Cloudian">doCreateVolume
Cloudian</a> |
<a class="reference external" href="./cli.xml#powerstore_doCreateVolume_CustomS3">doCreateVolume
CustomS3</a> |
<a class="reference external" href="./cli.xml#powerstore_doCreateVolume_EMC">doCreateVolume EMC</a> |
<a class="reference external" href="./cli.xml#powerstore_doCreateVolume_FileBlob">doCreateVolume
FileBlob</a> |
<a class="reference external" href="./cli.xml#powerstore_doCreateVolume_OpenIO">doCreateVolume OpenIO</a>
| <a class="reference external" href="./cli.xml#powerstore_doCreateVolume_S3">doCreateVolume S3</a> |
<a class="reference external" href="./cli.xml#powerstore_doCreateVolume_ScalityS3">doCreateVolume_ScalityS3</a>
| <a class="reference external" href="./cli.xml#powerstore_doCreateVolume_Swift">doCreateVolume Swift</a>
| <a class="reference external" href="./cli.xml#powerstore_doDeduplicate">doDeduplicate</a> |
<a class="reference external" href="./cli.xml#powerstore_doDeleteDrivePreviews">doDeleteDrivePreviews</a>
| <a class="reference external" href="./cli.xml#powerstore_doDeleteVolume">doDeleteVolume</a> |
<a class="reference external" href="./cli.xml#powerstore_doMailboxMove">doMailboxMove</a> |
<a class="reference external" href="./cli.xml#powerstore_doMoveBlobs">doMoveBlobs</a> |
<a class="reference external" href="./cli.xml#powerstore_doPurgeMailboxes">doPurgeMailboxes</a> |
<a class="reference external" href="./cli.xml#powerstore_doRemoveHsmPolicy">doRemoveHsmPolicy</a> |
<a class="reference external" href="./cli.xml#powerstore_doRemoveOrphanedBlobs">doRemoveOrphanedBlobs</a>
| <a class="reference external" href="./cli.xml#powerstore_doRestartService">doRestartService</a> |
<a class="reference external" href="./cli.xml#powerstore_doStartService">doStartService</a> |
<a class="reference external" href="./cli.xml#powerstore_doStopAllOperations">doStopAllOperations</a> |
<a class="reference external" href="./cli.xml#powerstore_doStopOperation">doStopOperation</a> |
<a class="reference external" href="./cli.xml#powerstore_doStopService">doStopService</a> |
<a class="reference external" href="./cli.xml#powerstore_doUpdateVolume_Alibaba">doUpdateVolume Alibaba</a>
| <a class="reference external" href="./cli.xml#powerstore_doUpdateVolume_Ceph">doUpdateVolume Ceph</a> |
<a class="reference external" href="./cli.xml#powerstore_doUpdateVolume_Cloudian">doUpdateVolume
Cloudian</a> |
<a class="reference external" href="./cli.xml#powerstore_doUpdateVolume_CustomS3">doUpdateVolume
CustomS3</a> |
<a class="reference external" href="./cli.xml#powerstore_doUpdateVolume_EMC">doUpdateVolume EMC</a> |
<a class="reference external" href="./cli.xml#powerstore_doUpdateVolume_FileBlob">doUpdateVolume
FileBlob</a> |
<a class="reference external" href="./cli.xml#powerstore_doUpdateVolume_OpenIO">doUpdateVolume OpenIO</a>
| <a class="reference external" href="./cli.xml#powerstore_doUpdateVolume_S3">doUpdateVolume S3</a> |
<a class="reference external" href="./cli.xml#powerstore_doUpdateVolume_ScalityS3">doUpdateVolume
ScalityS3</a> |
<a class="reference external" href="./cli.xml#powerstore_doUpdateVolume_Swift">doUpdateVolume Swift</a> |
<a class="reference external" href="./cli.xml#powerstore_doVolumeToVolumeMove">doVolumeToVolumeMove</a> |
<a class="reference external" href="./cli.xml#powerstore_getAllOperations">getAllOperations</a> |
<a class="reference external" href="./cli.xml#powerstore_getAllVolumes">getAllVolumes</a> |
<a class="reference external" href="./cli.xml#powerstore_getHsmPolicy">getHsmPolicy</a> |
<a class="reference external" href="./cli.xml#powerstore_getMovedMailboxes">getMovedMailboxes</a> |
<a class="reference external" href="./cli.xml#powerstore_getNonLocalMailboxes">getNonLocalMailboxes</a> |
<a class="reference external" href="./cli.xml#powerstore_getProperty">getProperty</a> |
<a class="reference external" href="./cli.xml#powerstore_getServices">getServices</a> |
<a class="reference external" href="./cli.xml#powerstore_getVolumeStats">getVolumeStats</a> | <a class="reference external" href="./cli.xml#powerstore_Indexing_content-extraction-tool_add">Indexing
content-extraction-tool
add</a> |
<a class="reference external" href="./cli.xml#powerstore_Indexing_content-extraction-tool_list">Indexing content-extraction-tool
list</a> |
<a class="reference external" href="./cli.xml#powerstore_Indexing_content-extraction-tool_remove">Indexing content-extraction-tool
remove</a>
| <a class="reference external" href="./cli.xml#powerstore_monitor">monitor</a> |
<a class="reference external" href="./cli.xml#powerstore_runBulkDelete">runBulkDelete</a> |
<a class="reference external" href="./cli.xml#powerstore_plus_setHsmPolicy">+setHsmPolicy</a> |
<a class="reference external" href="./cli.xml#powerstore_setHSMPolicy">setHSMPolicy</a> |
<a class="reference external" href="./cli.xml#powerstore_setProperty">setProperty</a> |</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mobile.html" class="btn btn-neutral float-left" title="Zextras Mobile" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="admin.html" class="btn btn-neutral float-right" title="Zextras Admin" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, The Zextras Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>